<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Paragrafe si Aliniere | Clasa 5</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252540;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-cyan: #06b6d4;
            --accent-red: #ef4444;
            --accent-yellow: #fbbf24;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #3d3d5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .quiz-title {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .xp-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            color: #fff;
        }

        .level-map {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .level-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border: 3px solid var(--border);
            background: var(--bg-card);
        }

        .level-node.locked { opacity: 0.5; cursor: not-allowed; }
        .level-node.locked::after { content: 'üîí'; position: absolute; font-size: 1rem; bottom: -5px; right: -5px; }
        .level-node.active { border-color: var(--accent-blue); box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); animation: pulse 2s infinite; }
        .level-node.completed { background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan)); border-color: var(--accent-green); }
        .level-node.completed::after { content: '‚úì'; position: absolute; font-size: 0.8rem; bottom: -5px; right: -5px; background: var(--accent-green); border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        .level-connector { width: 30px; height: 3px; background: var(--border); align-self: center; }
        .level-connector.completed { background: var(--accent-green); }

        .quiz-area {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border);
            min-height: 400px;
        }

        .level-intro { text-align: center; padding: 2rem; }
        .level-intro h2 { font-size: 2rem; margin-bottom: 1rem; color: var(--accent-blue); }
        .level-intro p { color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.1rem; }
        .level-intro .xp-reward { display: inline-block; background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); padding: 0.5rem 1rem; border-radius: 20px; margin-bottom: 2rem; }

        .question-container { display: none; }
        .question-container.active { display: block; animation: slideIn 0.5s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }

        .question-progress { display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 1.5rem; }
        .progress-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--border); }
        .progress-dot.current { background: var(--accent-blue); }
        .progress-dot.correct { background: var(--accent-green); }
        .progress-dot.wrong { background: var(--accent-red); }

        .question-text { font-size: 1.3rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center; line-height: 1.6; }

        /* Paragraph visual examples */
        .paragraph-example {
            background: #fff;
            color: #000;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem auto;
            max-width: 450px;
            font-family: 'Times New Roman', serif;
            font-size: 1rem;
            line-height: 1.6;
            border: 3px solid var(--accent-purple);
        }

        .paragraph-example.left { text-align: left; }
        .paragraph-example.center { text-align: center; }
        .paragraph-example.right { text-align: right; }
        .paragraph-example.justify { text-align: justify; }

        .alignment-toolbar {
            background: #2d2d4a;
            border-radius: 8px;
            padding: 0.75rem;
            margin: 1rem auto;
            max-width: 300px;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        .align-btn {
            padding: 0.5rem 0.8rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-size: 1.2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .align-btn.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .align-btn span {
            display: block;
            width: 20px;
            height: 2px;
            background: currentColor;
        }

        .align-btn.left span:nth-child(2) { width: 15px; }
        .align-btn.left span:nth-child(3) { width: 18px; }

        .align-btn.right span:nth-child(1) { margin-left: auto; }
        .align-btn.right span:nth-child(2) { width: 15px; margin-left: auto; }
        .align-btn.right span:nth-child(3) { width: 18px; margin-left: auto; }

        .align-btn.center span { margin: 0 auto; }
        .align-btn.center span:nth-child(2) { width: 15px; }
        .align-btn.center span:nth-child(3) { width: 18px; }

        .options-grid { display: grid; gap: 1rem; margin-top: 1.5rem; }
        .option { padding: 1.2rem 1.5rem; background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; cursor: pointer; transition: all 0.2s; font-size: 1rem; text-align: left; }
        .option:hover { border-color: var(--accent-purple); transform: translateX(5px); }
        .option.correct { border-color: var(--accent-green); background: rgba(16, 185, 129, 0.2); }
        .option.wrong { border-color: var(--accent-red); background: rgba(239, 68, 68, 0.2); }

        .feedback-box { display: none; padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem; text-align: center; }
        .feedback-box.show { display: block; animation: fadeIn 0.3s ease; }
        .feedback-box.correct { background: rgba(16, 185, 129, 0.2); border: 2px solid var(--accent-green); }
        .feedback-box.wrong { background: rgba(239, 68, 68, 0.2); border: 2px solid var(--accent-red); }
        .feedback-icon { font-size: 3rem; margin-bottom: 0.5rem; }
        .feedback-text { font-size: 1.1rem; margin-bottom: 1rem; }
        .explanation { font-size: 0.95rem; color: var(--text-secondary); background: var(--bg-card); padding: 1rem; border-radius: 8px; margin-top: 1rem; }

        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; font-size: 1rem; cursor: pointer; border: none; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); color: white; }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3); }
        .btn-success { background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan)); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--border); color: var(--text-secondary); }
        .btn-outline:hover { border-color: var(--accent-blue); color: var(--accent-blue); }

        .level-complete { display: none; text-align: center; padding: 3rem; }
        .level-complete.show { display: block; animation: celebrate 0.5s ease; }
        @keyframes celebrate { 0% { transform: scale(0.8); opacity: 0; } 50% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        .level-complete-icon { font-size: 5rem; margin-bottom: 1rem; }
        .level-complete h2 { font-size: 2rem; color: var(--accent-green); margin-bottom: 1rem; }
        .xp-earned { font-size: 2rem; color: var(--accent-blue); margin: 1.5rem 0; }
        .score-display { font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 2rem; }
        .stars { font-size: 3rem; margin: 1rem 0; }

        .back-link { display: inline-flex; align-items: center; gap: 0.5rem; color: var(--text-secondary); text-decoration: none; margin-bottom: 1rem; font-size: 0.9rem; }
        .back-link:hover { color: var(--accent-cyan); }

        @media (max-width: 600px) {
            .container { padding: 1rem; }
            .quiz-header { flex-direction: column; gap: 1rem; }
            .level-node { width: 50px; height: 50px; font-size: 1.2rem; }
            .question-text { font-size: 1.1rem; }
        }

        footer { margin-top: 3rem; padding: 1.5rem; text-align: center; color: var(--text-secondary); font-size: 0.85rem; border-top: 1px solid var(--border); }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Inapoi la Modulul 3</a>

        <div class="quiz-header">
            <div class="quiz-title">Quiz: Paragrafe si Aliniere</div>
            <div class="xp-display">
                <span>XP:</span>
                <span id="totalXP">0</span>
            </div>
        </div>

        <div class="level-map">
            <div class="level-node active" data-level="1" onclick="selectLevel(1)">1</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="2" onclick="selectLevel(2)">2</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="3" onclick="selectLevel(3)">3</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="4" onclick="selectLevel(4)">4</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="5" onclick="selectLevel(5)">5</div>
        </div>

        <div class="quiz-area" id="quizArea"></div>
    </div>

    <footer>
        <strong>&copy; 2026 Prof. Gurlan Vasile</strong><br>
        Informatica si TIC | <a href="mailto:grlnvasile@gmail.com" style="color: var(--accent-cyan);">grlnvasile@gmail.com</a>
    </footer>

    <script>
        const levels = {
            1: {
                title: "Nivel 1: Tasta Enter",
                description: "Invata sa creezi paragrafe noi cu tasta Enter",
                xpReward: 50,
                questions: [
                    {
                        text: "Ce este un paragraf in Word?",
                        options: [
                            "O poza",
                            "Un grup de propozitii care formeaza o idee, separat de restul textului",
                            "O pagina noua",
                            "Un tabel"
                        ],
                        correct: 1,
                        explanation: "Un paragraf este un bloc de text care contine o idee. In Word, fiecare apasare de Enter creaza un paragraf nou."
                    },
                    {
                        text: "Ce tasta apesi pentru a incepe un paragraf nou?",
                        options: [
                            "Tasta Spatiu",
                            "Tasta Tab",
                            "Tasta Enter",
                            "Tasta Shift"
                        ],
                        correct: 2,
                        explanation: "Tasta Enter te duce pe un rand nou si creaza un paragraf nou. E ca si cum ai spune 'Gata cu ideea asta, trec la urmatoarea!'"
                    },
                    {
                        text: "De ce este important sa imparti textul in paragrafe?",
                        visual: '<div class="paragraph-example">Acesta este primul paragraf. Contine o idee.<br><br>Acesta este al doilea paragraf. Contine alta idee.</div>',
                        options: [
                            "Nu este important",
                            "Ca sa fie textul mai usor de citit si inteles",
                            "Ca sa fie mai lung",
                            "Ca sa arate colorat"
                        ],
                        correct: 1,
                        explanation: "Paragrafele fac textul mai usor de citit. Fiecare paragraf = o idee noua. Fara paragrafe, textul ar fi un bloc greu de urmarit."
                    }
                ]
            },
            2: {
                title: "Nivel 2: Alinierea textului",
                description: "Invata cele 4 tipuri de aliniere: stanga, centru, dreapta, justify",
                xpReward: 75,
                questions: [
                    {
                        text: "Care este alinierea implicita (de baza) in Word?",
                        visual: '<div class="paragraph-example left">Acest text este aliniat la stanga. Este alinierea normala pentru majoritatea documentelor.</div>',
                        options: [
                            "La dreapta",
                            "La stanga",
                            "Centrat",
                            "Justify"
                        ],
                        correct: 1,
                        explanation: "Alinierea la stanga este implicita. Textul incepe de la marginea stanga si se termina oriunde pe dreapta. E cea mai folosita!"
                    },
                    {
                        text: "Cand folosesti alinierea la centru?",
                        visual: '<div class="paragraph-example center"><b>Titlu Centrat</b><br>Subtitlu</div>',
                        options: [
                            "Pentru text lung",
                            "Pentru titluri si subtitluri",
                            "Niciodata",
                            "Pentru tabele"
                        ],
                        correct: 1,
                        explanation: "Alinierea la centru e perfecta pentru titluri, subtitluri, sau text scurt care vrei sa iasa in evidenta in mijlocul paginii."
                    },
                    {
                        text: "Ce face alinierea 'Justify' (aliniere stanga-dreapta)?",
                        visual: '<div class="paragraph-example justify">Acest text este aliniat justify. Observa cum textul se intinde de la marginea stanga pana la marginea dreapta, ca intr-o carte sau ziar.</div>',
                        options: [
                            "Pune textul in centru",
                            "Intinde textul intre marginea stanga si dreapta (ca in carti)",
                            "Sterge textul",
                            "Face textul ingrosat"
                        ],
                        correct: 1,
                        explanation: "Justify aliniaza textul si la stanga SI la dreapta, exact ca in carti sau ziare. Arata foarte profesional pentru texte lungi!"
                    }
                ]
            },
            3: {
                title: "Nivel 3: Spatiere intre randuri",
                description: "Invata sa ajustezi spatiul dintre randuri",
                xpReward: 100,
                questions: [
                    {
                        text: "Ce inseamna 'line spacing' (spatiere intre randuri)?",
                        options: [
                            "Culoarea liniilor",
                            "Distanta verticala dintre doua randuri de text",
                            "Lungimea randurilor",
                            "Numarul de randuri"
                        ],
                        correct: 1,
                        explanation: "Line spacing = cat spatiu vertical este intre doua randuri. Un spatiu mai mare face textul mai aerisit si usor de citit."
                    },
                    {
                        text: "Care spatiere este standard pentru documente scolare?",
                        options: [
                            "0.5 (foarte inghesuit)",
                            "1.0 sau 1.5 (normal)",
                            "3.0 (foarte mare)",
                            "0 (fara spatiu)"
                        ],
                        correct: 1,
                        explanation: "Spatierea 1.0 (single) sau 1.5 este standard pentru documente. 1.5 e adesea ceruta pentru referate ca sa fie mai usor de citit si corectat."
                    },
                    {
                        text: "Unde gasesti optiunile pentru spatiere in Word?",
                        options: [
                            "In meniul File",
                            "In bara Home, sectiunea Paragraph, sau click dreapta > Paragraph",
                            "In meniul View",
                            "Nu exista aceasta optiune"
                        ],
                        correct: 1,
                        explanation: "Optiunile de spatiere sunt in Home > Paragraph (iconita cu linii si sageti). Sau click dreapta pe text > Paragraph > Line Spacing."
                    }
                ]
            },
            4: {
                title: "Nivel 4: Indentarea (Alineatul)",
                description: "Invata sa faci alineat la inceput de paragraf",
                xpReward: 125,
                questions: [
                    {
                        text: "Ce este indentarea (alineatul)?",
                        visual: '<div class="paragraph-example" style="text-indent: 2em;">Acest paragraf are alineat. Observa cum prima linie incepe mai in interior fata de restul textului. E ca in carti!</div>',
                        options: [
                            "O culoare pentru text",
                            "Un spatiu la inceputul primei linii din paragraf",
                            "O linie sub text",
                            "Un tabel"
                        ],
                        correct: 1,
                        explanation: "Indentarea (alineatul) este spatiul de la inceputul primei linii. Arata clar unde incepe un paragraf nou. E folosita mult in carti!"
                    },
                    {
                        text: "Ce tasta face un alineat rapid?",
                        options: [
                            "Enter",
                            "Tab",
                            "Spatiu",
                            "Delete"
                        ],
                        correct: 1,
                        explanation: "Tasta Tab adauga un spatiu mai mare (alineat) la inceputul liniei. E mult mai rapid decat sa apesi Spatiu de mai multe ori!"
                    },
                    {
                        text: "Cat de mare este de obicei un alineat standard?",
                        options: [
                            "0 cm",
                            "1.25 cm sau 1.27 cm (jumatate de inch)",
                            "10 cm",
                            "Toata pagina"
                        ],
                        correct: 1,
                        explanation: "Un alineat standard este de aproximativ 1.25 cm (sau 0.5 inch). E suficient cat sa se vada, dar nu prea mare."
                    }
                ]
            },
            5: {
                title: "Nivel 5: Spatiul dintre paragrafe",
                description: "Invata sa controlezi spatiul inainte si dupa paragrafe",
                xpReward: 150,
                questions: [
                    {
                        text: "Ce este 'Space Before/After' (Spatiu inainte/dupa)?",
                        options: [
                            "Spatiul dintre cuvinte",
                            "Spatiul vertical adaugat inainte sau dupa un paragraf",
                            "Culoarea fundalului",
                            "Marimea fontului"
                        ],
                        correct: 1,
                        explanation: "Space Before/After adauga spatiu vertical inainte sau dupa paragraf. E util pentru a separa sectiunile fara a apasa Enter de multe ori."
                    },
                    {
                        text: "De ce e mai bine sa folosesti 'Space After' decat sa apesi Enter de doua ori?",
                        options: [
                            "Nu e mai bine",
                            "Pentru ca poti controla exact spatiul si ramane consistent in tot documentul",
                            "Pentru ca e mai rapid",
                            "Pentru ca schimba culoarea"
                        ],
                        correct: 1,
                        explanation: "Space After iti da control precis (poti pune exact 12pt spatiu). E consistent in tot documentul si arata mai profesional decat Enter-uri multiple."
                    },
                    {
                        text: "Care setare este buna pentru spatiu dupa un titlu?",
                        options: [
                            "0 pt (fara spatiu)",
                            "6-12 pt (spatiu moderat)",
                            "100 pt (foarte mare)",
                            "Spatiu negativ"
                        ],
                        correct: 1,
                        explanation: "6-12 puncte spatiu dupa titlu este ideal. Separa titlul de text dar nu lasa prea mult gol. Arata profesional!"
                    },
                    {
                        text: "Scurtatura Ctrl + 2 ce face?",
                        options: [
                            "Sterge tot",
                            "Pune spatierea la 2.0 (double spacing)",
                            "Schimba fontul",
                            "Salveaza documentul"
                        ],
                        correct: 1,
                        explanation: "Ctrl + 2 seteaza spatierea la 2.0 (dubla). Ctrl + 1 = spatiere simpla, Ctrl + 5 = spatiere 1.5. Sunt scurtaturi utile!"
                    }
                ]
            }
        };

        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let totalXP = 0;
        let levelScores = {};
        let unlockedLevels = [1];

        function loadProgress() {
            const saved = localStorage.getItem('word_quiz3_progress');
            if (saved) {
                const data = JSON.parse(saved);
                totalXP = data.totalXP || 0;
                unlockedLevels = data.unlockedLevels || [1];
                levelScores = data.levelScores || {};
                updateXPDisplay();
                updateLevelMap();
            }
        }

        function saveProgress() {
            localStorage.setItem('word_quiz3_progress', JSON.stringify({
                totalXP,
                unlockedLevels,
                levelScores
            }));
        }

        function updateXPDisplay() {
            document.getElementById('totalXP').textContent = totalXP;
        }

        function updateLevelMap() {
            document.querySelectorAll('.level-node').forEach((node, index) => {
                const level = index + 1;
                node.classList.remove('locked', 'active', 'completed');
                if (levelScores[level] !== undefined) {
                    node.classList.add('completed');
                } else if (unlockedLevels.includes(level)) {
                    if (level === Math.max(...unlockedLevels.filter(l => levelScores[l] === undefined))) {
                        node.classList.add('active');
                    }
                } else {
                    node.classList.add('locked');
                }
            });
            document.querySelectorAll('.level-connector').forEach((conn, index) => {
                conn.classList.toggle('completed', levelScores[index + 1] !== undefined);
            });
        }

        function selectLevel(level) {
            if (!unlockedLevels.includes(level)) return;
            currentLevel = level;
            currentQuestion = 0;
            score = 0;
            showLevelIntro();
        }

        function showLevelIntro() {
            const levelData = levels[currentLevel];
            document.getElementById('quizArea').innerHTML = `
                <div class="level-intro">
                    <h2>${levelData.title}</h2>
                    <p>${levelData.description}</p>
                    <div class="xp-reward">+${levelData.xpReward} XP</div>
                    <button class="btn btn-primary" onclick="startLevel()">Incepe Nivelul</button>
                </div>
            `;
        }

        function startLevel() { showQuestion(); }

        function showQuestion() {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];

            let progressDots = levelData.questions.map((_, i) =>
                `<div class="progress-dot${i === currentQuestion ? ' current' : ''}"></div>`
            ).join('');

            let questionContent = `<p class="question-text">${q.text}</p>`;
            if (q.visual) questionContent += q.visual;

            let optionsHTML = q.options.map((opt, i) =>
                `<div class="option" onclick="selectAnswer(${i})">${opt}</div>`
            ).join('');

            document.getElementById('quizArea').innerHTML = `
                <div class="question-container active">
                    <div class="question-progress">${progressDots}</div>
                    ${questionContent}
                    <div class="options-grid">${optionsHTML}</div>
                    <div class="feedback-box" id="feedback"></div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">Urmatoarea Intrebare</button>
                    </div>
                </div>
            `;
        }

        function selectAnswer(index) {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const nextBtn = document.getElementById('nextBtn');

            options.forEach(opt => opt.style.pointerEvents = 'none');
            options[index].classList.add(index === q.correct ? 'correct' : 'wrong');
            if (index !== q.correct) options[q.correct].classList.add('correct');

            const dots = document.querySelectorAll('.progress-dot');
            dots[currentQuestion].classList.remove('current');
            dots[currentQuestion].classList.add(index === q.correct ? 'correct' : 'wrong');

            if (index === q.correct) {
                score++;
                feedback.className = 'feedback-box show correct';
                feedback.innerHTML = `<div class="feedback-icon">üéâ</div><div class="feedback-text">Corect!</div><div class="explanation">${q.explanation}</div>`;
            } else {
                feedback.className = 'feedback-box show wrong';
                feedback.innerHTML = `<div class="feedback-icon">üòÖ</div><div class="feedback-text">Nu chiar...</div><div class="explanation">${q.explanation}</div>`;
            }

            nextBtn.style.display = 'inline-flex';
            nextBtn.textContent = currentQuestion < levelData.questions.length - 1 ? 'Urmatoarea Intrebare' : 'Vezi Rezultatul';
        }

        function nextQuestion() {
            const levelData = levels[currentLevel];
            currentQuestion++;
            if (currentQuestion >= levelData.questions.length) {
                showLevelComplete();
            } else {
                showQuestion();
            }
        }

        function showLevelComplete() {
            const levelData = levels[currentLevel];
            const percentage = Math.round((score / levelData.questions.length) * 100);
            const passed = percentage >= 66;

            let stars = percentage >= 100 ? '‚≠ê‚≠ê‚≠ê' : percentage >= 80 ? '‚≠ê‚≠ê' : percentage >= 66 ? '‚≠ê' : 'üí™';

            let earnedXP = 0;
            if (passed) {
                earnedXP = levelData.xpReward;
                if (percentage === 100) earnedXP = Math.round(earnedXP * 1.5);
                if (!levelScores[currentLevel] || levelScores[currentLevel] < percentage) {
                    if (!levelScores[currentLevel]) totalXP += earnedXP;
                    levelScores[currentLevel] = percentage;
                }
                if (currentLevel < 5 && !unlockedLevels.includes(currentLevel + 1)) {
                    unlockedLevels.push(currentLevel + 1);
                }
                saveProgress();
                updateXPDisplay();
                updateLevelMap();
            }

            document.getElementById('quizArea').innerHTML = `
                <div class="level-complete show">
                    <div class="level-complete-icon">${passed ? 'üèÜ' : 'üìö'}</div>
                    <h2>${passed ? 'Nivel Completat!' : 'Mai incearca!'}</h2>
                    <div class="stars">${stars}</div>
                    <div class="score-display">${score}/${levelData.questions.length} raspunsuri corecte (${percentage}%)</div>
                    ${passed ? `<div class="xp-earned">+${earnedXP} XP</div>` : ''}
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="selectLevel(${currentLevel})">Reincearca</button>
                        ${passed && currentLevel < 5 ? `<button class="btn btn-primary" onclick="selectLevel(${currentLevel + 1})">Nivelul Urmator</button>` : ''}
                        ${passed && currentLevel === 5 ? `<button class="btn btn-success" onclick="window.location.href='quiz4-inserare.html'">Quiz-ul 4: Inserare Elemente</button>` : ''}
                    </div>
                </div>
            `;
        }

        loadProgress();
        showLevelIntro();
    </script>
</body>
</html>
