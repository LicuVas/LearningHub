<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Design Responsive | Clasa 8</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252540;
            --accent-red: #ef4444;
            --accent-rose: #f43f5e;
            --accent-green: #10b981;
            --accent-cyan: #06b6d4;
            --accent-yellow: #fbbf24;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #3d3d5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .quiz-title {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-rose));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .xp-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-rose));
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            color: #fff;
        }

        .level-map {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .level-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border: 3px solid var(--border);
            background: var(--bg-card);
        }

        .level-node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-node.locked::after {
            content: 'üîí';
            position: absolute;
            font-size: 1rem;
            bottom: -5px;
            right: -5px;
        }

        .level-node.active {
            border-color: var(--accent-red);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
            animation: pulse 2s infinite;
        }

        .level-node.completed {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            border-color: var(--accent-green);
        }

        .level-node.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 0.8rem;
            bottom: -5px;
            right: -5px;
            background: var(--accent-green);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .level-connector {
            width: 30px;
            height: 3px;
            background: var(--border);
            align-self: center;
        }

        .level-connector.completed {
            background: var(--accent-green);
        }

        .quiz-area {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border);
            min-height: 400px;
        }

        .level-intro {
            text-align: center;
            padding: 2rem;
        }

        .level-intro h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--accent-red);
        }

        .level-intro p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .level-intro .xp-reward {
            display: inline-block;
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin-bottom: 2rem;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .question-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
        }

        .progress-dot.current {
            background: var(--accent-red);
        }

        .progress-dot.correct {
            background: var(--accent-green);
        }

        .progress-dot.wrong {
            background: var(--accent-rose);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            line-height: 1.6;
        }

        .code-mockup {
            background: #1e1e3a;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem auto;
            max-width: 600px;
            text-align: left;
            border: 2px solid var(--border);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .device-mockup {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .device {
            background: #1e1e3a;
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem;
            text-align: center;
        }

        .device-screen {
            background: #fff;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .device.phone .device-screen {
            width: 60px;
            height: 100px;
        }

        .device.tablet .device-screen {
            width: 100px;
            height: 75px;
        }

        .device.desktop .device-screen {
            width: 140px;
            height: 80px;
        }

        .device-label {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 0.3rem;
        }

        .options-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .option {
            padding: 1.2rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
        }

        .option:hover {
            border-color: var(--accent-rose);
            transform: translateX(5px);
        }

        .option.correct {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.2);
        }

        .option.wrong {
            border-color: var(--accent-rose);
            background: rgba(244, 63, 94, 0.2);
        }

        .feedback-box {
            display: none;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            text-align: center;
        }

        .feedback-box.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .feedback-box.correct {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid var(--accent-green);
        }

        .feedback-box.wrong {
            background: rgba(244, 63, 94, 0.2);
            border: 2px solid var(--accent-rose);
        }

        .feedback-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .feedback-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .explanation {
            font-size: 0.95rem;
            color: var(--text-secondary);
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-red), var(--accent-rose));
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-secondary);
        }

        .btn-outline:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .level-complete {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .level-complete.show {
            display: block;
            animation: celebrate 0.5s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .level-complete-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .level-complete h2 {
            font-size: 2rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .xp-earned {
            font-size: 2rem;
            color: var(--accent-red);
            margin: 1.5rem 0;
        }

        .score-display {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .stars {
            font-size: 3rem;
            margin: 1rem 0;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .back-link:hover {
            color: var(--accent-cyan);
        }

        .quiz-complete-trophy {
            font-size: 6rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 600px) {
            .container { padding: 1rem; }
            .quiz-header { flex-direction: column; gap: 1rem; }
            .level-node { width: 50px; height: 50px; font-size: 1.2rem; }
            .question-text { font-size: 1.1rem; }
        }

        footer {
            margin-top: 3rem;
            padding: 1.5rem;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
        }
    </style>
    <link rel="stylesheet" href="../../../../../assets/css/mobile.css">
    <link rel="stylesheet" href="../../../../../assets/css/mobile-first.css">
    </head>
<body>
    <a href="#main-content" class="skip-link">Sari la continut</a>
    <div id="main-content" class="container">
        <a href="../index.html" class="back-link">‚Üê Inapoi la Modulul 4</a>

        <div class="quiz-header">
            <div class="quiz-title">Quiz: Design Responsive</div>
            <div class="xp-display">
                <span>XP:</span>
                <span id="totalXP">0</span>
            </div>
        </div>

        <div class="level-map">
            <div class="level-node active" data-level="1" onclick="selectLevel(1)">1</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="2" onclick="selectLevel(2)">2</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="3" onclick="selectLevel(3)">3</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="4" onclick="selectLevel(4)">4</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="5" onclick="selectLevel(5)">5</div>
        </div>

        <div class="quiz-area" id="quizArea">
        </div>
    </div>

    <footer>
        <strong>&copy; 2026 Prof. Gurlan Vasile</strong><br>
        Informatica si TIC | <a href="mailto:grlnvasile@gmail.com" style="color: var(--accent-cyan);">grlnvasile@gmail.com</a>
    </footer>

    <script>
        const levels = {
            1: {
                title: "Nivel 1: Ce este designul responsive?",
                description: "Invata de ce e important designul responsive",
                xpReward: 50,
                questions: [
                    {
                        text: "Ce inseamna design responsive?",
                        options: [
                            "Un design care raspunde la click",
                            "Un design care se adapteaza la dimensiunea ecranului (telefon, tableta, desktop)",
                            "Un design cu multe culori",
                            "Un design care se incarca rapid"
                        ],
                        correct: 1,
                        explanation: "Design responsive inseamna ca site-ul se adapteaza automat la dimensiunea ecranului - arata bine pe telefon, tableta si calculator. Este esential in era mobila!"
                    },
                    {
                        text: "De ce avem nevoie de design responsive?",
                        options: [
                            "Pentru ca e la moda",
                            "Pentru ca utilizatorii acceseaza site-uri de pe dispozitive cu ecrane diferite",
                            "Pentru a folosi mai multe culori",
                            "Pentru a avea mai multe pagini"
                        ],
                        correct: 1,
                        explanation: "Peste 50% din traficul web vine de pe telefoane mobile. Daca site-ul nu arata bine pe mobil, pierzi jumatate din vizitatori. Responsive design rezolva aceasta problema."
                    },
                    {
                        text: "Ce meta tag este esential pentru responsive design?",
                        hasCode: true,
                        codeContent: "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                        options: [
                            "meta charset",
                            "meta viewport",
                            "meta description",
                            "meta keywords"
                        ],
                        correct: 1,
                        explanation: "Meta viewport spune browserului cum sa controleze dimensiunile si scalarea paginii. Fara el, telefoanele ar afisa pagina ca pentru desktop, foarte mica."
                    }
                ]
            },
            2: {
                title: "Nivel 2: Media Queries - Bazele",
                description: "Descopera cum schimbi stilurile pentru diferite ecrane",
                xpReward: 75,
                questions: [
                    {
                        text: "Ce este un media query in CSS?",
                        options: [
                            "O modalitate de a adauga imagini",
                            "O regula CSS care aplica stiluri doar pentru anumite conditii (ex: latimea ecranului)",
                            "O metoda de a schimba fontul",
                            "Un tip de animatie"
                        ],
                        correct: 1,
                        explanation: "Media queries permit aplicarea unor stiluri CSS doar cand anumite conditii sunt indeplinite - de exemplu, cand ecranul e mai mic de 768px. Sunt baza designului responsive."
                    },
                    {
                        text: "Ce inseamna @media (max-width: 768px)?",
                        hasCode: true,
                        codeContent: "@media (max-width: 768px) {\n  .menu { display: none; }\n}",
                        options: [
                            "Stilurile se aplica pe ecrane mai MARI de 768px",
                            "Stilurile se aplica pe ecrane mai MICI sau egale cu 768px",
                            "Stilurile se aplica pe toate ecranele",
                            "Stilurile se aplica doar exact la 768px"
                        ],
                        correct: 1,
                        explanation: "max-width: 768px inseamna 'latimea maxima 768px' - stilurile se aplica pe ecrane de 768px sau mai mici. E folosit pentru stiluri mobile."
                    },
                    {
                        text: "Ce face min-width in media query?",
                        options: [
                            "Seteaza latimea minima a unui element",
                            "Aplica stiluri pe ecrane cu latime CEL PUTIN atat de mare",
                            "Face elementele mai mici",
                            "Sterge stilurile existente"
                        ],
                        correct: 1,
                        explanation: "@media (min-width: 1024px) aplica stiluri pe ecrane de 1024px sau MAI MARI. min-width e pentru desktop-first, max-width pentru mobile-first approach."
                    }
                ]
            },
            3: {
                title: "Nivel 3: Unitati relative",
                description: "Foloseste unitati care se adapteaza",
                xpReward: 100,
                questions: [
                    {
                        text: "Care este diferenta dintre px si % in CSS?",
                        options: [
                            "Nu exista diferenta",
                            "px este fix (absolut), % este relativ la elementul parinte",
                            "% este fix, px este relativ",
                            "Ambele sunt relative"
                        ],
                        correct: 1,
                        explanation: "px (pixeli) este o unitate fixa - 100px va fi mereu 100 pixeli. % este relativ la parinte - width: 50% va fi jumatate din latimea parintelui, adaptandu-se automat."
                    },
                    {
                        text: "Ce reprezinta unitatea 'vw' in CSS?",
                        options: [
                            "Very Wide",
                            "Viewport Width - procent din latimea ferestrei browserului",
                            "Variable Width",
                            "Virtual Width"
                        ],
                        correct: 1,
                        explanation: "vw = viewport width. 100vw este toata latimea ferestrei. 50vw este jumatate din latimea ferestrei. Se adapteaza cand redimensionezi browserul."
                    },
                    {
                        text: "Ce unitate este mai buna pentru fonturi responsive: px sau rem?",
                        options: [
                            "px - pentru ca e mai precis",
                            "rem - pentru ca se scaleaza relativ la font-ul radacina",
                            "Sunt identice",
                            "Niciuna - folosim doar em"
                        ],
                        correct: 1,
                        explanation: "rem (root em) este relativ la font-size-ul elementului <html>. Permite scalarea intregii interfete modificand o singura valoare. Mai accesibil decat px fix."
                    }
                ]
            },
            4: {
                title: "Nivel 4: Breakpoints comune",
                description: "Invata dimensiunile standard pentru dispozitive",
                xpReward: 125,
                questions: [
                    {
                        text: "Care este un breakpoint comun pentru telefoane mobile?",
                        options: [
                            "max-width: 1200px",
                            "max-width: 576px sau 480px",
                            "max-width: 1920px",
                            "max-width: 2560px"
                        ],
                        correct: 1,
                        explanation: "Pentru telefoane se folosesc breakpoints ca 480px, 576px sau 600px. Sub aceste dimensiuni, layout-ul trece de obicei la o singura coloana si elementele se aseaza vertical."
                    },
                    {
                        text: "Care breakpoint e tipic pentru tablete?",
                        options: [
                            "768px - 1024px",
                            "1920px - 2560px",
                            "320px - 480px",
                            "1px - 100px"
                        ],
                        correct: 1,
                        explanation: "Tabletele au de obicei ecrane intre 768px si 1024px. iPad-ul standard are 768px latime in portret. La aceste dimensiuni, layout-ul poate avea 2 coloane."
                    },
                    {
                        text: "Ce inseamna abordarea 'mobile-first'?",
                        options: [
                            "Site-ul functioneaza doar pe mobil",
                            "Stilurile de baza sunt pentru mobil, apoi adaugam stiluri pentru ecrane mai mari cu min-width",
                            "Mobilele se incarca primele",
                            "Ignoram desktop-ul complet"
                        ],
                        correct: 1,
                        explanation: "Mobile-first inseamna ca stilurile default sunt pentru telefon. Apoi, cu @media (min-width: ...), adaugam stiluri pentru tablete si desktop. E considerat best practice modern."
                    }
                ]
            },
            5: {
                title: "Nivel 5: Tehnici responsive avansate",
                description: "Stapaneste trucurile profesionistilor",
                xpReward: 150,
                questions: [
                    {
                        text: "Cum facem o imagine sa se redimensioneze automat dar sa nu depaseasca containerul?",
                        hasCode: true,
                        codeContent: "img {\n  max-width: 100%;\n  height: auto;\n}",
                        options: [
                            "width: 100px; height: 100px;",
                            "max-width: 100%; height: auto;",
                            "size: responsive;",
                            "display: flex;"
                        ],
                        correct: 1,
                        explanation: "max-width: 100% face imaginea sa nu depaseasca latimea containerului, iar height: auto pastreaza proportiile. Imaginea se micsoreaza pe ecrane mici dar nu creste mai mare decat originalul."
                    },
                    {
                        text: "Ce proprietate CSS ascunde meniul pe mobil pentru a-l inlocui cu hamburger?",
                        hasCode: true,
                        codeContent: "@media (max-width: 768px) {\n  .nav-menu {\n    display: ???;\n  }\n}",
                        options: [
                            "display: visible;",
                            "display: none;",
                            "display: hidden;",
                            "display: mobile;"
                        ],
                        correct: 1,
                        explanation: "display: none ascunde complet elementul. Pe mobil, meniul mare se ascunde si se afiseaza in schimb un buton hamburger care deschide meniul cand e apasat."
                    },
                    {
                        text: "Care combinatie este cea mai buna pentru un container responsive centrat?",
                        options: [
                            "width: 1000px;",
                            "max-width: 1200px; width: 90%; margin: 0 auto;",
                            "width: 100vw;",
                            "min-width: 500px;"
                        ],
                        correct: 1,
                        explanation: "max-width limiteaza latimea pe desktop, width: 90% lasa putin spatiu pe margini, margin: 0 auto centreaza. Container-ul se adapteaza la orice ecran ramanand centrat si lizibil."
                    }
                ]
            }
        };

        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let totalXP = 0;
        let levelScores = {};
        let unlockedLevels = [1];

        function loadProgress() {
            const saved = localStorage.getItem('web_quiz5_progress_cls8');
            if (saved) {
                const data = JSON.parse(saved);
                totalXP = data.totalXP || 0;
                unlockedLevels = data.unlockedLevels || [1];
                levelScores = data.levelScores || {};
                updateXPDisplay();
                updateLevelMap();
            }
        }

        function saveProgress() {
            localStorage.setItem('web_quiz5_progress_cls8', JSON.stringify({
                totalXP,
                unlockedLevels,
                levelScores
            }));
        }

        function updateXPDisplay() {
            document.getElementById('totalXP').textContent = totalXP;
        }

        function updateLevelMap() {
            document.querySelectorAll('.level-node').forEach((node, index) => {
                const level = index + 1;
                node.classList.remove('locked', 'active', 'completed');

                if (levelScores[level] !== undefined) {
                    node.classList.add('completed');
                } else if (unlockedLevels.includes(level)) {
                    if (level === Math.max(...unlockedLevels.filter(l => levelScores[l] === undefined))) {
                        node.classList.add('active');
                    }
                } else {
                    node.classList.add('locked');
                }
            });

            document.querySelectorAll('.level-connector').forEach((conn, index) => {
                if (levelScores[index + 1] !== undefined) {
                    conn.classList.add('completed');
                } else {
                    conn.classList.remove('completed');
                }
            });
        }

        function selectLevel(level) {
            if (!unlockedLevels.includes(level)) return;
            currentLevel = level;
            currentQuestion = 0;
            score = 0;
            showLevelIntro();
        }

        function showLevelIntro() {
            const levelData = levels[currentLevel];
            document.getElementById('quizArea').innerHTML = `
                <div class="level-intro">
                    <h2>${levelData.title}</h2>
                    <p>${levelData.description}</p>
                    <div class="xp-reward">+${levelData.xpReward} XP</div>
                    <button class="btn btn-primary" onclick="startLevel()">
                        Incepe Nivelul
                    </button>
                </div>
            `;
        }

        function startLevel() {
            showQuestion();
        }

        function showQuestion() {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];

            let progressDots = '';
            for (let i = 0; i < levelData.questions.length; i++) {
                let dotClass = 'progress-dot';
                if (i === currentQuestion) dotClass += ' current';
                progressDots += `<div class="${dotClass}"></div>`;
            }

            let questionContent = `<p class="question-text">${q.text}</p>`;

            if (q.hasCode) {
                questionContent += `
                    <div class="code-mockup">
                        <pre>${q.codeContent}</pre>
                    </div>
                `;
            }

            let optionsHTML = '';
            q.options.forEach((opt, i) => {
                optionsHTML += `<div class="option" onclick="selectAnswer(${i})">${opt}</div>`;
            });

            document.getElementById('quizArea').innerHTML = `
                <div class="question-container active">
                    <div class="question-progress">${progressDots}</div>
                    ${questionContent}
                    <div class="options-grid">${optionsHTML}</div>
                    <div class="feedback-box" id="feedback"></div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                            Urmatoarea Intrebare
                        </button>
                    </div>
                </div>
            `;
        }

        function selectAnswer(index) {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const nextBtn = document.getElementById('nextBtn');

            options.forEach(opt => opt.style.pointerEvents = 'none');

            options[index].classList.add(index === q.correct ? 'correct' : 'wrong');
            if (index !== q.correct) {
                options[q.correct].classList.add('correct');
            }

            const dots = document.querySelectorAll('.progress-dot');
            dots[currentQuestion].classList.remove('current');
            dots[currentQuestion].classList.add(index === q.correct ? 'correct' : 'wrong');

            if (index === q.correct) {
                score++;
                feedback.className = 'feedback-box show correct';
                feedback.innerHTML = `
                    <div class="feedback-icon">üéâ</div>
                    <div class="feedback-text">Corect! Excelent!</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            } else {
                feedback.className = 'feedback-box show wrong';
                feedback.innerHTML = `
                    <div class="feedback-icon">üòÖ</div>
                    <div class="feedback-text">Nu e chiar asa...</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            }

            nextBtn.style.display = 'inline-flex';
            nextBtn.textContent = currentQuestion < levelData.questions.length - 1 ?
                'Urmatoarea Intrebare' : 'Vezi Rezultatul';
        }

        function nextQuestion() {
            const levelData = levels[currentLevel];
            currentQuestion++;

            if (currentQuestion >= levelData.questions.length) {
                showLevelComplete();
            } else {
                showQuestion();
            }
        }

        function showLevelComplete() {
            const levelData = levels[currentLevel];
            const percentage = Math.round((score / levelData.questions.length) * 100);
            const passed = percentage >= 66;

            let stars = '';
            if (percentage >= 100) stars = '‚≠ê‚≠ê‚≠ê';
            else if (percentage >= 80) stars = '‚≠ê‚≠ê';
            else if (percentage >= 66) stars = '‚≠ê';
            else stars = 'üí™';

            let earnedXP = 0;
            if (passed) {
                earnedXP = levelData.xpReward;
                if (percentage === 100) earnedXP = Math.round(earnedXP * 1.5);

                if (!levelScores[currentLevel] || levelScores[currentLevel] < percentage) {
                    if (!levelScores[currentLevel]) {
                        totalXP += earnedXP;
                    }
                    levelScores[currentLevel] = percentage;
                }

                if (currentLevel < 5 && !unlockedLevels.includes(currentLevel + 1)) {
                    unlockedLevels.push(currentLevel + 1);
                }

                saveProgress();
                updateXPDisplay();
                updateLevelMap();
            }

            let nextButton = '';
            if (passed && currentLevel < 5) {
                nextButton = `
                    <button class="btn btn-primary" onclick="selectLevel(${currentLevel + 1})">
                        Nivelul Urmator
                    </button>
                `;
            } else if (passed && currentLevel === 5) {
                nextButton = `
                    <button class="btn btn-success" onclick="window.location.href='../index.html'">
                        Inapoi la Modulul 4
                    </button>
                `;
            }

            let completionMessage = '';
            if (passed && currentLevel === 5) {
                completionMessage = `
                    <div style="background: rgba(16, 185, 129, 0.1); border: 2px solid var(--accent-green); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
                        <div class="quiz-complete-trophy">üèÜ</div>
                        <h3 style="color: var(--accent-green); margin-bottom: 0.5rem;">Felicitari!</h3>
                        <p style="color: var(--text-secondary);">Ai completat toate quiz-urile din Modulul 4 - Web Development Avansat!</p>
                    </div>
                `;
            }

            document.getElementById('quizArea').innerHTML = `
                <div class="level-complete show">
                    <div class="level-complete-icon">${passed ? 'üèÜ' : 'üìö'}</div>
                    <h2>${passed ? 'Nivel Completat!' : 'Mai incearca!'}</h2>
                    <div class="stars">${stars}</div>
                    <div class="score-display">${score}/${levelData.questions.length} raspunsuri corecte (${percentage}%)</div>
                    ${passed ? `<div class="xp-earned">+${earnedXP} XP</div>` : ''}
                    ${completionMessage}
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 1.5rem;">
                        <button class="btn btn-outline" onclick="selectLevel(${currentLevel})">
                            Reincearca
                        </button>
                        ${nextButton}
                    </div>
                </div>
            `;
        }

        loadProgress();
        showLevelIntro();
    </script>
</body>
</html>
