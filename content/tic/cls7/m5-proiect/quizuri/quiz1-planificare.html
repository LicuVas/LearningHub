<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Planificarea Site-ului | Clasa 7</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252540;
            --accent-green: #10b981;
            --accent-cyan: #06b6d4;
            --accent-red: #ef4444;
            --accent-yellow: #fbbf24;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #3d3d5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Header with XP */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .quiz-title {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .xp-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            color: #fff;
        }

        /* Level Map */
        .level-map {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .level-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border: 3px solid var(--border);
            background: var(--bg-card);
        }

        .level-node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-node.locked::after {
            content: 'üîí';
            position: absolute;
            font-size: 1rem;
            bottom: -5px;
            right: -5px;
        }

        .level-node.active {
            border-color: var(--accent-green);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
            animation: pulse 2s infinite;
        }

        .level-node.completed {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            border-color: var(--accent-green);
        }

        .level-node.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 0.8rem;
            bottom: -5px;
            right: -5px;
            background: var(--accent-green);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Level connector line */
        .level-connector {
            width: 30px;
            height: 3px;
            background: var(--border);
            align-self: center;
        }

        .level-connector.completed {
            background: var(--accent-green);
        }

        /* Quiz Area */
        .quiz-area {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border);
            min-height: 400px;
        }

        .level-intro {
            text-align: center;
            padding: 2rem;
        }

        .level-intro h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--accent-green);
        }

        .level-intro p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .level-intro .xp-reward {
            display: inline-block;
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin-bottom: 2rem;
        }

        /* Question styles */
        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .question-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
        }

        .progress-dot.current {
            background: var(--accent-green);
        }

        .progress-dot.correct {
            background: var(--accent-green);
        }

        .progress-dot.wrong {
            background: var(--accent-red);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            line-height: 1.6;
        }

        /* Code mockup */
        .code-mockup {
            background: #1e1e3a;
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem auto;
            max-width: 500px;
            text-align: left;
            border: 2px solid var(--border);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--accent-cyan);
        }

        .code-mockup .tag {
            color: var(--accent-green);
        }

        .code-mockup .attr {
            color: var(--accent-yellow);
        }

        .code-mockup .value {
            color: #f472b6;
        }

        /* Answer options */
        .options-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .option {
            padding: 1.2rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
        }

        .option:hover {
            border-color: var(--accent-cyan);
            transform: translateX(5px);
        }

        .option.selected {
            border-color: var(--accent-cyan);
            background: rgba(6, 182, 212, 0.1);
        }

        .option.correct {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.2);
        }

        .option.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.2);
        }

        /* Feedback */
        .feedback-box {
            display: none;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            text-align: center;
        }

        .feedback-box.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .feedback-box.correct {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid var(--accent-green);
        }

        .feedback-box.wrong {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid var(--accent-red);
        }

        .feedback-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .feedback-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .explanation {
            font-size: 0.95rem;
            color: var(--text-secondary);
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-secondary);
        }

        .btn-outline:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        /* Level complete screen */
        .level-complete {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .level-complete.show {
            display: block;
            animation: celebrate 0.5s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .level-complete-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .level-complete h2 {
            font-size: 2rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .xp-earned {
            font-size: 2rem;
            color: var(--accent-cyan);
            margin: 1.5rem 0;
        }

        .score-display {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .stars {
            font-size: 3rem;
            margin: 1rem 0;
        }

        /* Back link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .back-link:hover {
            color: var(--accent-cyan);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container { padding: 1rem; }
            .quiz-header { flex-direction: column; gap: 1rem; }
            .level-node { width: 50px; height: 50px; font-size: 1.2rem; }
            .question-text { font-size: 1.1rem; }
        }

        footer {
            margin-top: 3rem;
            padding: 1.5rem;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">‚Üê Inapoi la Modulul 5</a>

        <div class="quiz-header">
            <div class="quiz-title">Quiz: Planificarea Site-ului Web</div>
            <div class="xp-display">
                <span>XP:</span>
                <span id="totalXP">0</span>
            </div>
        </div>

        <!-- Level Map -->
        <div class="level-map">
            <div class="level-node active" data-level="1" onclick="selectLevel(1)">1</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="2" onclick="selectLevel(2)">2</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="3" onclick="selectLevel(3)">3</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="4" onclick="selectLevel(4)">4</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="5" onclick="selectLevel(5)">5</div>
        </div>

        <!-- Quiz Area -->
        <div class="quiz-area" id="quizArea">
            <!-- Level intro will be shown here -->
        </div>
    </div>

    <footer>
        <strong>&copy; 2026 Prof. Gurlan Vasile</strong><br>
        Informatica si TIC | <a href="mailto:grlnvasile@gmail.com" style="color: var(--accent-cyan);">grlnvasile@gmail.com</a>
    </footer>

    <script>
        // Quiz data for each level
        const levels = {
            1: {
                title: "Nivel 1: Ce este un site web?",
                description: "Invata ce este un site web si de ce ai nevoie de planificare",
                xpReward: 50,
                questions: [
                    {
                        text: "Ce este un site web?",
                        options: [
                            "Un program instalat pe calculator",
                            "O colectie de pagini web interconectate, accesibile pe internet",
                            "Un document Word salvat online",
                            "O aplicatie de telefon"
                        ],
                        correct: 1,
                        explanation: "Un site web este o colectie de pagini web legate intre ele prin link-uri, care poate fi accesata de oricine are internet printr-un browser."
                    },
                    {
                        text: "De ce este importanta planificarea unui site web?",
                        options: [
                            "Nu este importanta, poti incepe direct",
                            "Ca sa stii ce pagini vei crea si ce continut va avea fiecare",
                            "Ca sa dureze mai mult timpul de lucru",
                            "Ca sa fie mai greu de facut"
                        ],
                        correct: 1,
                        explanation: "Planificarea te ajuta sa organizezi ideile, sa stii exact ce pagini creezi, ce informatii pui pe fiecare si cum vor fi legate intre ele. Fara plan, risti sa faci un site dezorganizat."
                    },
                    {
                        text: "Care este primul pas cand vrei sa creezi un site web?",
                        options: [
                            "Sa scrii cod HTML imediat",
                            "Sa stabilesti obiectivul si publicul tinta al site-ului",
                            "Sa cumperi un domeniu",
                            "Sa alegi culorile"
                        ],
                        correct: 1,
                        explanation: "Primul pas este sa raspunzi la intrebari: Pentru cine fac site-ul? Ce vreau sa afle vizitatorii? Ce scop are site-ul? Aceste raspunsuri ghideaza tot ce urmeaza."
                    }
                ]
            },
            2: {
                title: "Nivel 2: Obiectivele site-ului",
                description: "Invata sa definesti clar scopul site-ului tau",
                xpReward: 75,
                questions: [
                    {
                        text: "Ce inseamna 'obiectivul' unui site web?",
                        options: [
                            "Culorile folosite pe site",
                            "Scopul principal - ce vrei sa realizeze site-ul",
                            "Numarul de pagini",
                            "Viteza de incarcare"
                        ],
                        correct: 1,
                        explanation: "Obiectivul este scopul principal al site-ului: sa informeze, sa vanda, sa distreze, sa educe. Fiecare site trebuie sa aiba un obiectiv clar definit."
                    },
                    {
                        text: "Care ar fi un obiectiv bun pentru un site de prezentare a unui hobby?",
                        options: [
                            "Sa vanda cat mai multe produse",
                            "Sa prezinte informatii interesante despre hobby si sa inspire vizitatorii",
                            "Sa aiba cat mai multe pagini",
                            "Sa foloseasca animatii complicate"
                        ],
                        correct: 1,
                        explanation: "Un site de hobby ar trebui sa prezinte informatii despre pasiunea ta, sa inspire altii sa incerce si sa ofere resurse utile pentru cei interesati."
                    },
                    {
                        text: "Ce inseamna 'public tinta'?",
                        options: [
                            "Toti oamenii din lume",
                            "Persoanele carora le este destinat site-ul tau",
                            "Numai prietenii tai",
                            "Profesorii de la scoala"
                        ],
                        correct: 1,
                        explanation: "Publicul tinta sunt persoanele pentru care creezi site-ul: elevi, parinti, pasionati de un subiect, etc. Cunoscand publicul, poti adapta continutul si limbajul."
                    }
                ]
            },
            3: {
                title: "Nivel 3: Structura continutului",
                description: "Invata sa organizezi informatiile pe site",
                xpReward: 100,
                questions: [
                    {
                        text: "Ce este o 'harta a site-ului' (sitemap)?",
                        options: [
                            "O imagine cu locatia serverului",
                            "O schema care arata toate paginile si cum sunt conectate",
                            "Un cod special HTML",
                            "O lista de culori"
                        ],
                        correct: 1,
                        explanation: "Sitemap-ul este o diagrama sau lista care arata toate paginile site-ului si relatiile dintre ele. Te ajuta sa vizualizezi structura inainte de a incepe codarea."
                    },
                    {
                        text: "Care este o structura tipica pentru un site simplu de prezentare?",
                        options: [
                            "O singura pagina foarte lunga",
                            "Pagina principala (Home), Despre, Galerie, Contact",
                            "100 de pagini fara legatura",
                            "Doar pagina de contact"
                        ],
                        correct: 1,
                        explanation: "O structura clasica include: Home (prezentare generala), Despre (informatii despre subiect), Galerie (imagini/exemple) si Contact (cum poti fi contactat)."
                    },
                    {
                        text: "De ce este importanta organizarea logica a continutului?",
                        options: [
                            "Nu este importanta",
                            "Ca vizitatorii sa gaseasca usor informatiile cautate",
                            "Ca site-ul sa arate mai colorat",
                            "Ca sa ai mai multe pagini"
                        ],
                        correct: 1,
                        explanation: "O organizare logica ajuta vizitatorii sa navigheze usor si sa gaseasca rapid ce cauta. Un site dezorganizat frustreaza utilizatorii care pleaca fara sa revina."
                    }
                ]
            },
            4: {
                title: "Nivel 4: Continutul paginilor",
                description: "Invata ce informatii sa incluzi pe fiecare pagina",
                xpReward: 125,
                questions: [
                    {
                        text: "Ce ar trebui sa contina pagina principala (Home)?",
                        options: [
                            "Toate informatiile site-ului",
                            "O prezentare scurta si link-uri catre celelalte sectiuni",
                            "Doar imagini",
                            "Nimic, sa fie goala"
                        ],
                        correct: 1,
                        explanation: "Pagina Home este 'usa de intrare' - trebuie sa prezinte pe scurt despre ce este site-ul si sa ghideze vizitatorii catre sectiunile de interes prin meniu si link-uri."
                    },
                    {
                        text: "Ce tip de continut este recomandat pentru un site web?",
                        options: [
                            "Texte foarte lungi fara paragrafe",
                            "Texte scurte, clare, imagini relevante si titluri descriptive",
                            "Doar animatii si efecte vizuale",
                            "Texte copiate de pe alte site-uri"
                        ],
                        correct: 1,
                        explanation: "Continutul web trebuie sa fie usor de citit: paragrafe scurte, titluri clare, imagini care completeaza textul. Vizitatorii citesc rapid si vor informatii la obiect."
                    },
                    {
                        text: "Ce informatii sunt importante pe pagina de Contact?",
                        options: [
                            "Parola conturilor tale",
                            "Email, eventual telefon si un formular de contact",
                            "Toate fotografiile tale personale",
                            "Lista de cumparaturi"
                        ],
                        correct: 1,
                        explanation: "Pagina Contact ofera vizitatorilor modalitati de a te contacta: adresa de email, eventual telefon sau formular. Nu include niciodata informatii sensibile sau personale!"
                    }
                ]
            },
            5: {
                title: "Nivel 5: Planul de lucru",
                description: "Invata sa creezi un plan complet pentru site-ul tau",
                xpReward: 150,
                questions: [
                    {
                        text: "Ce documente sunt utile in faza de planificare?",
                        options: [
                            "Doar codul HTML final",
                            "Schite pe hartie, lista de pagini, continutul fiecarei pagini",
                            "Nimic, totul se face din memorie",
                            "Doar o imagine cu logo-ul"
                        ],
                        correct: 1,
                        explanation: "Inainte de a scrie cod, este util sa ai: schite ale designului (wireframes), lista paginilor, continutul pregatit pentru fiecare pagina, si o lista de imagini necesare."
                    },
                    {
                        text: "Ce este un 'wireframe'?",
                        options: [
                            "Un tip de cablu pentru internet",
                            "O schita simpla care arata aranjamentul elementelor pe pagina",
                            "Un limbaj de programare",
                            "Un tip de font"
                        ],
                        correct: 1,
                        explanation: "Wireframe-ul este o schita care arata unde vor fi plasate elementele (meniu, titlu, text, imagini) pe pagina, fara a include design grafic sau culori - doar structura."
                    },
                    {
                        text: "Care este ordinea corecta pentru crearea unui site web?",
                        options: [
                            "Publicare > Design > Planificare > Continut",
                            "Planificare > Continut > Design/Cod > Testare > Publicare",
                            "Design > Publicare > Planificare > Continut",
                            "Continut > Publicare > Planificare > Design"
                        ],
                        correct: 1,
                        explanation: "Ordinea corecta este: 1) Planificare (obiective, structura), 2) Pregatire continut, 3) Design si codare, 4) Testare (verificare functionare), 5) Publicare online."
                    }
                ]
            }
        };

        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let totalXP = 0;
        let levelScores = {};
        let unlockedLevels = [1];

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('cls7_quiz1_planificare_progress');
            if (saved) {
                const data = JSON.parse(saved);
                totalXP = data.totalXP || 0;
                unlockedLevels = data.unlockedLevels || [1];
                levelScores = data.levelScores || {};
                updateXPDisplay();
                updateLevelMap();
            }
        }

        function saveProgress() {
            localStorage.setItem('cls7_quiz1_planificare_progress', JSON.stringify({
                totalXP,
                unlockedLevels,
                levelScores
            }));
        }

        function updateXPDisplay() {
            document.getElementById('totalXP').textContent = totalXP;
        }

        function updateLevelMap() {
            document.querySelectorAll('.level-node').forEach((node, index) => {
                const level = index + 1;
                node.classList.remove('locked', 'active', 'completed');

                if (levelScores[level] !== undefined) {
                    node.classList.add('completed');
                } else if (unlockedLevels.includes(level)) {
                    if (level === Math.max(...unlockedLevels.filter(l => levelScores[l] === undefined))) {
                        node.classList.add('active');
                    }
                } else {
                    node.classList.add('locked');
                }
            });

            document.querySelectorAll('.level-connector').forEach((conn, index) => {
                if (levelScores[index + 1] !== undefined) {
                    conn.classList.add('completed');
                } else {
                    conn.classList.remove('completed');
                }
            });
        }

        function selectLevel(level) {
            if (!unlockedLevels.includes(level)) return;
            currentLevel = level;
            currentQuestion = 0;
            score = 0;
            showLevelIntro();
        }

        function showLevelIntro() {
            const levelData = levels[currentLevel];
            document.getElementById('quizArea').innerHTML = `
                <div class="level-intro">
                    <h2>${levelData.title}</h2>
                    <p>${levelData.description}</p>
                    <div class="xp-reward">+${levelData.xpReward} XP</div>
                    <button class="btn btn-primary" onclick="startLevel()">
                        Incepe Nivelul
                    </button>
                </div>
            `;
        }

        function startLevel() {
            showQuestion();
        }

        function showQuestion() {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];

            let progressDots = '';
            for (let i = 0; i < levelData.questions.length; i++) {
                let dotClass = 'progress-dot';
                if (i === currentQuestion) dotClass += ' current';
                progressDots += `<div class="${dotClass}"></div>`;
            }

            let questionContent = `<p class="question-text">${q.text}</p>`;

            let optionsHTML = '';
            q.options.forEach((opt, i) => {
                optionsHTML += `<div class="option" onclick="selectAnswer(${i})">${opt}</div>`;
            });

            document.getElementById('quizArea').innerHTML = `
                <div class="question-container active">
                    <div class="question-progress">${progressDots}</div>
                    ${questionContent}
                    <div class="options-grid">${optionsHTML}</div>
                    <div class="feedback-box" id="feedback"></div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                            Urmatoarea Intrebare
                        </button>
                    </div>
                </div>
            `;
        }

        function selectAnswer(index) {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const nextBtn = document.getElementById('nextBtn');

            // Disable all options
            options.forEach(opt => opt.style.pointerEvents = 'none');

            // Show correct/wrong
            options[index].classList.add(index === q.correct ? 'correct' : 'wrong');
            if (index !== q.correct) {
                options[q.correct].classList.add('correct');
            }

            // Update progress dots
            const dots = document.querySelectorAll('.progress-dot');
            dots[currentQuestion].classList.remove('current');
            dots[currentQuestion].classList.add(index === q.correct ? 'correct' : 'wrong');

            // Show feedback
            if (index === q.correct) {
                score++;
                feedback.className = 'feedback-box show correct';
                feedback.innerHTML = `
                    <div class="feedback-icon">üéâ</div>
                    <div class="feedback-text">Corect!</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            } else {
                feedback.className = 'feedback-box show wrong';
                feedback.innerHTML = `
                    <div class="feedback-icon">üòÖ</div>
                    <div class="feedback-text">Nu chiar... Raspunsul corect era: "${q.options[q.correct]}"</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            }

            nextBtn.style.display = 'inline-flex';
            nextBtn.textContent = currentQuestion < levelData.questions.length - 1 ?
                'Urmatoarea Intrebare' : 'Vezi Rezultatul';
        }

        function nextQuestion() {
            const levelData = levels[currentLevel];
            currentQuestion++;

            if (currentQuestion >= levelData.questions.length) {
                showLevelComplete();
            } else {
                showQuestion();
            }
        }

        function showLevelComplete() {
            const levelData = levels[currentLevel];
            const percentage = Math.round((score / levelData.questions.length) * 100);
            const passed = percentage >= 66;

            let stars = '';
            if (percentage >= 100) stars = '‚≠ê‚≠ê‚≠ê';
            else if (percentage >= 80) stars = '‚≠ê‚≠ê';
            else if (percentage >= 66) stars = '‚≠ê';
            else stars = 'üí™';

            let earnedXP = 0;
            if (passed) {
                earnedXP = levelData.xpReward;
                if (percentage === 100) earnedXP = Math.round(earnedXP * 1.5);

                if (!levelScores[currentLevel] || levelScores[currentLevel] < percentage) {
                    if (!levelScores[currentLevel]) {
                        totalXP += earnedXP;
                    }
                    levelScores[currentLevel] = percentage;
                }

                // Unlock next level
                if (currentLevel < 5 && !unlockedLevels.includes(currentLevel + 1)) {
                    unlockedLevels.push(currentLevel + 1);
                }

                saveProgress();
                updateXPDisplay();
                updateLevelMap();
            }

            document.getElementById('quizArea').innerHTML = `
                <div class="level-complete show">
                    <div class="level-complete-icon">${passed ? 'üèÜ' : 'üìö'}</div>
                    <h2>${passed ? 'Nivel Completat!' : 'Mai incearca!'}</h2>
                    <div class="stars">${stars}</div>
                    <div class="score-display">${score}/${levelData.questions.length} raspunsuri corecte (${percentage}%)</div>
                    ${passed ? `<div class="xp-earned">+${earnedXP} XP</div>` : ''}
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="selectLevel(${currentLevel})">
                            Reincearca
                        </button>
                        ${passed && currentLevel < 5 ? `
                            <button class="btn btn-primary" onclick="selectLevel(${currentLevel + 1})">
                                Nivelul Urmator
                            </button>
                        ` : ''}
                        ${passed && currentLevel === 5 ? `
                            <button class="btn btn-success" onclick="window.location.href='quiz2-structura.html'">
                                Quiz-ul 2: Structura Paginilor
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Initialize
        loadProgress();
        showLevelIntro();
    </script>
</body>
</html>
