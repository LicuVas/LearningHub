<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback LearningHub | Prof. Gurlan Vasile</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a12;
            --bg-secondary: #12121f;
            --bg-card: #1a1a2e;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-cyan: #06b6d4;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #2d2d44;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 2rem 0;
        }

        .header-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Form Card */
        .form-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .form-label .required {
            color: var(--accent-red);
        }

        .form-hint {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* Inputs */
        input[type="text"],
        select,
        textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        input[type="text"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 4px rgba(6, 182, 212, 0.1);
        }

        input[type="text"]::placeholder,
        textarea::placeholder {
            color: var(--text-muted);
        }

        select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
        }

        select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Rating Stars */
        .rating-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .rating-btn {
            padding: 0.75rem 1.25rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s ease;
        }

        .rating-btn:hover {
            border-color: var(--accent-orange);
            transform: scale(1.05);
        }

        .rating-btn.selected {
            border-color: var(--accent-orange);
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-orange);
        }

        /* Yes/No Pills */
        .pills-group {
            display: flex;
            gap: 0.75rem;
        }

        .pill-btn {
            flex: 1;
            padding: 0.875rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.2s ease;
        }

        .pill-btn:hover {
            border-color: var(--accent-cyan);
        }

        .pill-btn.selected {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
        }

        .pill-btn.selected-no {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }

        /* Section Divider */
        .section-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .section-divider::before,
        .section-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            border: none;
            border-radius: 12px;
            color: white;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .preview-btn {
            width: 100%;
            padding: 1rem;
            background: var(--bg-card);
            border: 2px solid var(--accent-blue);
            border-radius: 12px;
            color: var(--accent-blue);
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.2s ease;
        }

        .preview-btn:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .modal-icon {
            font-size: 2.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .summary-item {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .summary-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .summary-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .modal-btn {
            flex: 1;
            padding: 0.875rem;
            border-radius: 12px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn.secondary {
            background: var(--bg-card);
            border: 2px solid var(--border);
            color: var(--text-secondary);
        }

        .modal-btn.primary {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            border: none;
            color: white;
        }

        /* Success State */
        .success-card {
            display: none;
            text-align: center;
            padding: 3rem 2rem;
        }

        .success-card.active {
            display: block;
        }

        .success-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .success-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-green);
            margin-bottom: 0.5rem;
        }

        .success-text {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Spinner */
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Back Link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: var(--accent-cyan);
        }

        /* Error State */
        .error-msg {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--accent-red);
            border-radius: 12px;
            padding: 1rem;
            color: var(--accent-red);
            margin-bottom: 1rem;
            display: none;
        }

        .error-msg.active {
            display: block;
        }

        /* Mobile */
        @media (max-width: 480px) {
            .container { padding: 1rem; }
            h1 { font-size: 1.5rem; }
            .form-card { padding: 1.5rem; }
            .rating-btn { padding: 0.5rem 0.875rem; font-size: 1.25rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Inapoi la LearningHub</a>

        <div class="header">
            <div class="header-icon">üìù</div>
            <h1>Feedback LearningHub</h1>
            <p class="subtitle">Parerea ta conteaza! Ajuta-ne sa imbunatatim materialele.</p>
        </div>

        <!-- Main Form -->
        <div class="form-card" id="formCard">
            <form id="feedbackForm">
                <!-- Identity Section -->
                <div class="form-group">
                    <label class="form-label">Scoala <span class="required">*</span></label>
                    <select id="school" required>
                        <option value="" disabled selected>Alege scoala...</option>
                        <option value="Elena Cuza">Scoala Elena Cuza</option>
                        <option value="Victor Brauner">Liceul Victor Brauner</option>
                        <option value="Tupilati">Scoala Tupilati</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Clasa <span class="required">*</span></label>
                    <select id="classSelect" required disabled>
                        <option value="" disabled selected>Alege mai intai scoala...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Numele tau (optional)</label>
                    <input type="text" id="studentName" placeholder="Poti ramane anonim">
                    <p class="form-hint">Feedback-ul poate fi trimis si anonim</p>
                </div>

                <div class="section-divider">DESPRE MATERIALE</div>

                <div class="form-group">
                    <label class="form-label">Ce modul evaluezi? <span class="required">*</span></label>
                    <select id="module" required>
                        <option value="" disabled selected>Alege modulul...</option>
                        <option value="M1">Modul 1</option>
                        <option value="M2">Modul 2</option>
                        <option value="M3">Modul 3 (curent)</option>
                        <option value="M4">Modul 4</option>
                        <option value="M5">Modul 5</option>
                        <option value="General">Site-ul in general</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Nota generala <span class="required">*</span></label>
                    <div class="rating-group" id="ratingGroup">
                        <button type="button" class="rating-btn" data-value="1">1 üòû</button>
                        <button type="button" class="rating-btn" data-value="2">2 üòê</button>
                        <button type="button" class="rating-btn" data-value="3">3 üôÇ</button>
                        <button type="button" class="rating-btn" data-value="4">4 üòä</button>
                        <button type="button" class="rating-btn" data-value="5">5 ü§©</button>
                    </div>
                    <input type="hidden" id="rating" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Materialele au fost clare?</label>
                    <div class="pills-group" id="clearGroup">
                        <button type="button" class="pill-btn" data-value="Da">‚úì Da</button>
                        <button type="button" class="pill-btn" data-value="Partial">~ Partial</button>
                        <button type="button" class="pill-btn" data-value="Nu">‚úó Nu</button>
                    </div>
                    <input type="hidden" id="wasClear">
                </div>

                <div class="form-group">
                    <label class="form-label">Ai inteles lectiile?</label>
                    <div class="pills-group" id="understoodGroup">
                        <button type="button" class="pill-btn" data-value="Da">‚úì Da</button>
                        <button type="button" class="pill-btn" data-value="Partial">~ Partial</button>
                        <button type="button" class="pill-btn" data-value="Nu">‚úó Nu</button>
                    </div>
                    <input type="hidden" id="understood">
                </div>

                <div class="form-group">
                    <label class="form-label">Recomanzi site-ul colegilor?</label>
                    <div class="pills-group" id="recommendGroup">
                        <button type="button" class="pill-btn" data-value="Da">üëç Da</button>
                        <button type="button" class="pill-btn" data-value="Nu">üëé Nu</button>
                    </div>
                    <input type="hidden" id="recommend">
                </div>

                <div class="section-divider">FEEDBACK DETALIAT</div>

                <div class="form-group">
                    <label class="form-label">Ce ti-a placut cel mai mult?</label>
                    <textarea id="liked" placeholder="Ex: Explicatiile pas cu pas, exemplele interactive..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Ce ai imbunatati?</label>
                    <textarea id="improve" placeholder="Ex: Mai multe exercitii, explicatii video..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Alte comentarii</label>
                    <textarea id="comments" placeholder="Orice altceva vrei sa ne spui..."></textarea>
                </div>

                <div class="error-msg" id="errorMsg">
                    Te rugam sa completezi campurile obligatorii marcate cu *
                </div>

                <button type="button" class="preview-btn" onclick="showPreview()">
                    üëÅÔ∏è Verifica inainte de trimitere
                </button>

                <button type="submit" class="submit-btn" id="submitBtn">
                    <span>üì§ Trimite Feedback</span>
                </button>
            </form>
        </div>

        <!-- Success Card -->
        <div class="form-card success-card" id="successCard">
            <div class="success-icon">üéâ</div>
            <h2 class="success-title">Multumim pentru feedback!</h2>
            <p class="success-text">Parerea ta ne ajuta sa imbunatatim LearningHub pentru toti elevii.</p>
            <button class="submit-btn" onclick="resetForm()">
                üìù Trimite alt feedback
            </button>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">üìã</div>
                <div class="modal-title">Verifica datele</div>
            </div>

            <div id="summaryContent">
                <!-- Populated by JS -->
            </div>

            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closePreview()">
                    ‚úèÔ∏è Modifica
                </button>
                <button class="modal-btn primary" onclick="submitForm()">
                    ‚úì Confirma si trimite
                </button>
            </div>
        </div>
    </div>

    <!-- School/Class Data -->
    <script>
        const schoolClasses = {
            'Elena Cuza': ['5A', '5B', '5C', '5D', '6A', '6B', '6C', '7A', '7B', '8A', '8B', '8C'],
            'Victor Brauner': ['5A', '5M', '6A', '6MA', '7A', '7M', '8A', '8M', '9A', '9M', '10M', '11M', '12M'],
            'Tupilati': ['1A', '2A', '3A', '4A', '5A', '6A']
        };

        // School selection handler
        document.getElementById('school').addEventListener('change', function() {
            const classSelect = document.getElementById('classSelect');
            const classes = schoolClasses[this.value] || [];

            classSelect.innerHTML = '<option value="" disabled selected>Alege clasa...</option>';
            classes.forEach(cls => {
                const opt = document.createElement('option');
                opt.value = cls;
                opt.textContent = cls;
                classSelect.appendChild(opt);
            });
            classSelect.disabled = false;
        });

        // Rating buttons
        document.querySelectorAll('#ratingGroup .rating-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('#ratingGroup .rating-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                document.getElementById('rating').value = this.dataset.value;
            });
        });

        // Pills buttons helper
        function setupPills(groupId, inputId) {
            document.querySelectorAll(`#${groupId} .pill-btn`).forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll(`#${groupId} .pill-btn`).forEach(b => {
                        b.classList.remove('selected', 'selected-no');
                    });
                    this.classList.add(this.dataset.value === 'Nu' ? 'selected-no' : 'selected');
                    document.getElementById(inputId).value = this.dataset.value;
                });
            });
        }

        setupPills('clearGroup', 'wasClear');
        setupPills('understoodGroup', 'understood');
        setupPills('recommendGroup', 'recommend');

        // Preview Modal
        function showPreview() {
            const school = document.getElementById('school').value;
            const classVal = document.getElementById('classSelect').value;
            const rating = document.getElementById('rating').value;
            const module = document.getElementById('module').value;

            // Validate required fields
            if (!school || !classVal || !rating || !module) {
                document.getElementById('errorMsg').classList.add('active');
                return;
            }
            document.getElementById('errorMsg').classList.remove('active');

            const name = document.getElementById('studentName').value || 'Anonim';
            const wasClear = document.getElementById('wasClear').value || '-';
            const understood = document.getElementById('understood').value || '-';
            const recommend = document.getElementById('recommend').value || '-';
            const liked = document.getElementById('liked').value || '-';
            const improve = document.getElementById('improve').value || '-';

            const ratingEmojis = ['', 'üòû', 'üòê', 'üôÇ', 'üòä', 'ü§©'];

            document.getElementById('summaryContent').innerHTML = `
                <div class="summary-item">
                    <div class="summary-label">Elev</div>
                    <div class="summary-value">${name} (${school} - ${classVal})</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Modul evaluat</div>
                    <div class="summary-value">${module}</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Nota generala</div>
                    <div class="summary-value">${rating}/5 ${ratingEmojis[rating]}</div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Materiale clare / Inteles / Recomanda</div>
                    <div class="summary-value">${wasClear} / ${understood} / ${recommend}</div>
                </div>
                ${liked !== '-' ? `
                <div class="summary-item">
                    <div class="summary-label">Ce ti-a placut</div>
                    <div class="summary-value">${liked}</div>
                </div>
                ` : ''}
                ${improve !== '-' ? `
                <div class="summary-item">
                    <div class="summary-label">Ce ai imbunatati</div>
                    <div class="summary-value">${improve}</div>
                </div>
                ` : ''}
            `;

            document.getElementById('previewModal').classList.add('active');
        }

        function closePreview() {
            document.getElementById('previewModal').classList.remove('active');
        }

        // Form submission
        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showPreview();
        });

        function submitForm() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class="spinner"></div> Se trimite...';
            closePreview();

            // Collect data
            const data = {
                timestamp: new Date().toISOString(),
                school: document.getElementById('school').value,
                class: document.getElementById('classSelect').value,
                name: document.getElementById('studentName').value || 'Anonim',
                module: document.getElementById('module').value,
                rating: document.getElementById('rating').value,
                wasClear: document.getElementById('wasClear').value || '',
                understood: document.getElementById('understood').value || '',
                recommend: document.getElementById('recommend').value || '',
                liked: document.getElementById('liked').value || '',
                improve: document.getElementById('improve').value || '',
                comments: document.getElementById('comments').value || ''
            };

            // Send to Google Apps Script
            // Replace YOUR_SCRIPT_URL with your actual deployed web app URL
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbxGI_7hz5o2_aluhPgu-Cudi4SRGR5ZJR-SXSQdFLw_1FlbANOQYgegs7ULmsm78qFX2g/exec';

            if (scriptUrl === 'YOUR_SCRIPT_URL') {
                // Demo mode - simulate success
                setTimeout(() => {
                    showSuccess();
                }, 1000);
                console.log('Feedback data:', data);
                return;
            }

            fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(() => {
                showSuccess();
            })
            .catch(error => {
                console.error('Error:', error);
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>üì§ Trimite Feedback</span>';
                alert('A aparut o eroare. Te rugam sa incerci din nou.');
            });
        }

        function showSuccess() {
            document.getElementById('formCard').style.display = 'none';
            document.getElementById('successCard').classList.add('active');
        }

        function resetForm() {
            document.getElementById('feedbackForm').reset();
            document.querySelectorAll('.rating-btn, .pill-btn').forEach(btn => {
                btn.classList.remove('selected', 'selected-no');
            });
            document.getElementById('classSelect').disabled = true;
            document.getElementById('classSelect').innerHTML = '<option value="" disabled selected>Alege mai intai scoala...</option>';
            document.getElementById('rating').value = '';
            document.getElementById('wasClear').value = '';
            document.getElementById('understood').value = '';
            document.getElementById('recommend').value = '';

            document.getElementById('successCard').classList.remove('active');
            document.getElementById('formCard').style.display = 'block';

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<span>üì§ Trimite Feedback</span>';
        }

        // Close modal on backdrop click
        document.getElementById('previewModal').addEventListener('click', function(e) {
            if (e.target === this) closePreview();
        });
    </script>
</body>
</html>
