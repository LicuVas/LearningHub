<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Profesor - LearningHub</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="../../assets/css/mobile.css">
    <link rel="stylesheet" href="../../assets/css/mobile-first.css">
    </head>
<body>
    <a href="#main-content" class="skip-link">Sari la continut</a>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>LearningHub</h1>
                <span class="header-subtitle">Dashboard Profesor</span>
            </div>
            <div class="header-right">
                <button id="refresh-btn" class="btn-icon" title="Refresh">
                    <span class="icon">üîÑ</span>
                </button>
                <div class="auto-refresh">
                    <input type="checkbox" id="auto-refresh" checked>
                    <label for="auto-refresh">Auto-refresh (30s)</label>
                </div>
                <a href="../index.html" class="btn-secondary">Inapoi la Hub</a>
            </div>
        </header>

        <!-- Stats Overview -->
        <section class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-info">
                    <span class="stat-value" id="total-students">-</span>
                    <span class="stat-label">Elevi activi</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìö</div>
                <div class="stat-info">
                    <span class="stat-value" id="total-submissions">-</span>
                    <span class="stat-label">Dovezi trimise</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-info">
                    <span class="stat-value" id="today-submissions">-</span>
                    <span class="stat-label">Astazi</span>
                </div>
            </div>
            <div class="stat-card highlight">
                <div class="stat-icon">‚è≥</div>
                <div class="stat-info">
                    <span class="stat-value" id="pending-review">-</span>
                    <span class="stat-label">De verificat</span>
                </div>
            </div>
        </section>

        <!-- Navigation Tabs -->
        <nav class="dashboard-nav">
            <button class="nav-tab active" data-view="overview">Overview</button>
            <button class="nav-tab" data-view="by-class">Pe Clase</button>
            <button class="nav-tab" data-view="by-student">Pe Elevi</button>
            <button class="nav-tab" data-view="by-lesson">Pe Lectii</button>
            <button class="nav-tab" data-view="pending">De Verificat</button>
        </nav>

        <!-- Main Content Area -->
        <main class="dashboard-content" id="main-content">
            <!-- Overview View -->
            <div class="view active" id="view-overview">
                <div class="content-grid">
                    <!-- Recent Activity -->
                    <div class="card">
                        <h3>Activitate Recenta</h3>
                        <div class="activity-list" id="recent-activity">
                            <div class="loading">Se incarca...</div>
                        </div>
                    </div>

                    <!-- Class Summary -->
                    <div class="card">
                        <h3>Rezumat pe Clase</h3>
                        <div class="class-summary" id="class-summary">
                            <div class="loading">Se incarca...</div>
                        </div>
                    </div>

                    <!-- Top Students -->
                    <div class="card">
                        <h3>Top Elevi (Saptamana)</h3>
                        <div class="top-students" id="top-students">
                            <div class="loading">Se incarca...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- By Class View -->
            <div class="view" id="view-by-class">
                <div class="filters">
                    <select id="filter-class">
                        <option value="">Toate clasele</option>
                        <option value="cls5">Clasa a 5-a</option>
                        <option value="cls6">Clasa a 6-a</option>
                        <option value="cls7">Clasa a 7-a</option>
                        <option value="cls8">Clasa a 8-a</option>
                    </select>
                </div>
                <div class="data-table-container">
                    <table class="data-table" id="class-table">
                        <thead>
                            <tr>
                                <th>Elev</th>
                                <th>Clasa</th>
                                <th>Lectii Completate</th>
                                <th>Ultima Activitate</th>
                                <th>Actiuni</th>
                            </tr>
                        </thead>
                        <tbody id="class-table-body">
                            <tr><td colspan="5" class="loading">Se incarca...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- By Student View -->
            <div class="view" id="view-by-student">
                <div class="filters">
                    <input type="text" id="search-student" placeholder="Cauta elev...">
                </div>
                <div class="student-details" id="student-details">
                    <div class="empty-state">
                        <span class="icon">üë§</span>
                        <p>Selecteaza un elev din tabelul "Pe Clase" pentru a vedea detalii</p>
                    </div>
                </div>
            </div>

            <!-- By Lesson View -->
            <div class="view" id="view-by-lesson">
                <div class="filters">
                    <select id="filter-module">
                        <option value="">Toate modulele</option>
                        <option value="m2-scratch">M2 - Scratch Baza</option>
                        <option value="m3-scratch-control">M3 - Scratch Control</option>
                        <option value="m5-proiect">M5 - Proiect</option>
                    </select>
                    <select id="filter-lesson">
                        <option value="">Toate lectiile</option>
                    </select>
                </div>
                <div class="lesson-gallery" id="lesson-gallery">
                    <div class="loading">Se incarca...</div>
                </div>
            </div>

            <!-- Pending Review View -->
            <div class="view" id="view-pending">
                <div class="pending-list" id="pending-list">
                    <div class="loading">Se incarca...</div>
                </div>
            </div>
        </main>

        <!-- Configuration Modal -->
        <div class="modal" id="config-modal">
            <div class="modal-content">
                <h2>Configurare Dashboard</h2>
                <div class="form-group">
                    <label>Google Sheet ID:</label>
                    <input type="text" id="config-sheet-id" placeholder="1ABC...">
                </div>
                <div class="form-group">
                    <label>API Key:</label>
                    <input type="text" id="config-api-key" placeholder="AIza...">
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeConfigModal()">Anuleaza</button>
                    <button class="btn-primary" onclick="saveConfig()">Salveaza</button>
                </div>
            </div>
        </div>

        <!-- Setup Instructions (shown if not configured) -->
        <div class="setup-overlay" id="setup-overlay">
            <div class="setup-content">
                <h2>Configureaza Dashboard-ul</h2>
                <p>Pentru a vedea datele elevilor, trebuie sa configurezi conexiunea la Google Sheets.</p>

                <div class="setup-steps">
                    <div class="step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h4>Creeaza Google Form</h4>
                            <p>Urmeaza instructiunile din <code>data/evidence-config.json</code></p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h4>Copiaza Sheet ID</h4>
                            <p>Din Google Sheets > Responses, copiaza ID-ul din URL</p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <h4>Obtine API Key</h4>
                            <p>Google Cloud Console > APIs > Sheets API > Credentials</p>
                        </div>
                    </div>
                </div>

                <div class="setup-form">
                    <div class="form-group">
                        <label>Google Sheet ID:</label>
                        <input type="text" id="setup-sheet-id" placeholder="1ABC...xyz">
                    </div>
                    <div class="form-group">
                        <label>API Key:</label>
                        <input type="text" id="setup-api-key" placeholder="AIza...">
                    </div>
                    <button class="btn-primary" onclick="completeSetup()">Configureaza</button>
                    <button class="btn-ghost" onclick="useDemoMode()">Foloseste Date Demo</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <span>LearningHub Teacher Dashboard</span>
            <span id="last-update">Ultima actualizare: -</span>
            <button class="btn-ghost" onclick="showConfigModal()">Setari</button>
        </footer>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
