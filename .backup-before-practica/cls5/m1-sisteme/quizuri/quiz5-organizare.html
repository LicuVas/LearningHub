<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Organizarea Datelor | Clasa 5</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #252540;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #10b981;
            --accent-cyan: #06b6d4;
            --accent-red: #ef4444;
            --accent-yellow: #fbbf24;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #3d3d5c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        .quiz-title {
            font-size: 1.3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .xp-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            color: #fff;
        }

        .level-map {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .level-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            border: 3px solid var(--border);
            background: var(--bg-card);
        }

        .level-node.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-node.locked::after {
            content: 'üîí';
            position: absolute;
            font-size: 1rem;
            bottom: -5px;
            right: -5px;
        }

        .level-node.active {
            border-color: var(--accent-blue);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            animation: pulse 2s infinite;
        }

        .level-node.completed {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            border-color: var(--accent-green);
        }

        .level-node.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 0.8rem;
            bottom: -5px;
            right: -5px;
            background: var(--accent-green);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .level-connector {
            width: 30px;
            height: 3px;
            background: var(--border);
            align-self: center;
        }

        .level-connector.completed {
            background: var(--accent-green);
        }

        .quiz-area {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border);
            min-height: 400px;
        }

        .level-intro {
            text-align: center;
            padding: 2rem;
        }

        .level-intro h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--accent-blue);
        }

        .level-intro p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .level-intro .xp-reward {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            color: var(--accent-blue);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin-bottom: 2rem;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .question-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border);
        }

        .progress-dot.current {
            background: var(--accent-blue);
        }

        .progress-dot.correct {
            background: var(--accent-green);
        }

        .progress-dot.wrong {
            background: var(--accent-red);
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            line-height: 1.6;
        }

        /* Folder tree mockup */
        .folder-tree {
            background: #2d2d4a;
            border-radius: 8px;
            margin: 1rem auto;
            max-width: 300px;
            padding: 1rem;
            border: 2px solid var(--border);
            text-align: left;
        }

        .tree-item {
            padding: 0.3rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .tree-item::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            height: 100%;
            width: 1px;
            background: var(--border);
        }

        .tree-item:last-child::before {
            height: 50%;
        }

        .tree-item::after {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 50%;
            width: 0.75rem;
            height: 1px;
            background: var(--border);
        }

        .tree-root {
            padding-left: 0;
        }

        .tree-root::before, .tree-root::after {
            display: none;
        }

        .tree-icon {
            margin-right: 0.5rem;
        }

        .options-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .option {
            padding: 1.2rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            text-align: left;
        }

        .option:hover {
            border-color: var(--accent-purple);
            transform: translateX(5px);
        }

        .option.correct {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.2);
        }

        .option.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.2);
        }

        .feedback-box {
            display: none;
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            text-align: center;
        }

        .feedback-box.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .feedback-box.correct {
            background: rgba(16, 185, 129, 0.2);
            border: 2px solid var(--accent-green);
        }

        .feedback-box.wrong {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid var(--accent-red);
        }

        .feedback-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .feedback-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .explanation {
            font-size: 0.95rem;
            color: var(--text-secondary);
            background: var(--bg-card);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-secondary);
        }

        .btn-outline:hover {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .level-complete {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .level-complete.show {
            display: block;
            animation: celebrate 0.5s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .level-complete-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .level-complete h2 {
            font-size: 2rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .xp-earned {
            font-size: 2rem;
            color: var(--accent-blue);
            margin: 1.5rem 0;
        }

        .score-display {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .stars {
            font-size: 3rem;
            margin: 1rem 0;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .back-link:hover {
            color: var(--accent-cyan);
        }

        /* Quiz complete celebration */
        .quiz-complete {
            text-align: center;
            padding: 2rem;
        }

        .quiz-complete h2 {
            color: var(--accent-purple);
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .trophy-big {
            font-size: 6rem;
            margin: 1rem 0;
        }

        .total-xp-display {
            font-size: 2.5rem;
            color: var(--accent-blue);
            margin: 1rem 0;
        }

        @media (max-width: 600px) {
            .container { padding: 1rem; }
            .quiz-header { flex-direction: column; gap: 1rem; }
            .level-node { width: 50px; height: 50px; font-size: 1.2rem; }
            .question-text { font-size: 1.1rem; }
        }

        footer {
            margin-top: 3rem;
            padding: 1.5rem;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
        }
    </style>
    <link rel="stylesheet" href="../../../../../assets/css/mobile.css">
    <link rel="stylesheet" href="../../../../../assets/css/mobile-first.css">
    </head>
<body>
    <a href="#main-content" class="skip-link">Sari la continut</a>
    <div id="main-content" class="container">
        <a href="../index.html" class="back-link">‚Üê Inapoi la Modulul 1</a>

        <div class="quiz-header">
            <div class="quiz-title">Quiz: Organizarea Datelor pe Calculator</div>
            <div class="xp-display">
                <span>XP:</span>
                <span id="totalXP">0</span>
            </div>
        </div>

        <div class="level-map">
            <div class="level-node active" data-level="1" onclick="selectLevel(1)">1</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="2" onclick="selectLevel(2)">2</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="3" onclick="selectLevel(3)">3</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="4" onclick="selectLevel(4)">4</div>
            <div class="level-connector"></div>
            <div class="level-node locked" data-level="5" onclick="selectLevel(5)">5</div>
        </div>

        <div class="quiz-area" id="quizArea">
        </div>
    </div>

    <footer>
        <strong>&copy; 2026 Prof. Gurlan Vasile</strong><br>
        Informatica si TIC | <a href="mailto:grlnvasile@gmail.com" style="color: var(--accent-cyan);">grlnvasile@gmail.com</a>
    </footer>

    <script>
        const levels = {
            1: {
                title: "Nivel 1: Locatii importante",
                description: "Invata despre locatiile speciale din Windows",
                xpReward: 50,
                questions: [
                    {
                        text: "Ce este folderul 'Documents' (Documente)?",
                        options: [
                            "Un joc",
                            "Folderul recomandat pentru salvarea documentelor tale personale",
                            "Un program de scris",
                            "O componenta hardware"
                        ],
                        correct: 1,
                        explanation: "Folderul 'Documents' (Documente) este locatia speciala, recomandata de Windows pentru a-ti salva documentele: referate, teme, texte etc. E usor de gasit si e organizat pentru tine!"
                    },
                    {
                        text: "Unde e recomandat sa salvezi pozele si imaginile?",
                        options: [
                            "In Cosul de gunoi",
                            "In folderul 'Pictures' (Imagini)",
                            "Pe Desktop, toate",
                            "In folderul Windows"
                        ],
                        correct: 1,
                        explanation: "Folderul 'Pictures' (Imagini) este special pentru fotografii si imagini. Multe programe (ca Paint sau aplicatia Poze) cauta automat aici. E locul perfect pentru pozele tale!"
                    },
                    {
                        text: "Ce contine folderul 'Downloads' (Descarcari)?",
                        options: [
                            "Jocuri instalate",
                            "Fisierele descarcate de pe internet",
                            "Programul Windows",
                            "Setarile calculatorului"
                        ],
                        correct: 1,
                        explanation: "In 'Downloads' (Descarcari) ajung automat fisierele pe care le descarci de pe internet: poze, documente, programe etc. E bine sa le sortezi periodic de aici in folderele potrivite!"
                    }
                ]
            },
            2: {
                title: "Nivel 2: Structura de foldere",
                description: "Invata sa creezi o structura organizata de foldere",
                xpReward: 75,
                questions: [
                    {
                        text: "Cum ar trebui sa organizezi fisierele pentru scoala?",
                        hasVisual: true,
                        visualType: "tree",
                        options: [
                            "Toate intr-un singur folder mare",
                            "Cate un folder pentru fiecare materie, cu subfoldere pentru teme si proiecte",
                            "Toate pe Desktop",
                            "Nu le salvezi deloc"
                        ],
                        correct: 1,
                        explanation: "Cea mai buna organizare: un folder 'Scoala' cu subfoldere pentru fiecare materie (Matematica, Romana, Istorie etc.), si in fiecare poti avea subfoldere pentru Teme, Proiecte etc."
                    },
                    {
                        text: "Care este avantajul de a folosi subfoldere?",
                        options: [
                            "Incetineste calculatorul",
                            "Gasesti fisierele mai rapid si totul e organizat pe categorii",
                            "Face fisierele mai mari",
                            "Nu exista niciun avantaj"
                        ],
                        correct: 1,
                        explanation: "Subfolderele te ajuta sa gasesti rapid ce cauti! In loc sa cauti printre 100 de fisiere, te duci direct in folderul potrivit (ex: Scoala > Matematica > Teme) si gasesti imediat."
                    },
                    {
                        text: "Care este o regula buna pentru denumirea fisierelor?",
                        options: [
                            "Sa folosesti doar numere",
                            "Sa folosesti nume clare si descriptive (ex: Referat_Dacii_Clasa5.docx)",
                            "Sa nu pui niciun nume",
                            "Sa folosesti cat mai multe caractere speciale"
                        ],
                        correct: 1,
                        explanation: "Numele clar te ajuta sa stii ce contine fisierul fara sa-l deschizi. 'Referat_Dacii_Clasa5.docx' e mult mai util decat 'Document1.docx' sau 'aaa.docx'!"
                    }
                ]
            },
            3: {
                title: "Nivel 3: Copierea si mutarea",
                description: "Invata sa copiezi si sa muti fisierele",
                xpReward: 100,
                questions: [
                    {
                        text: "Care este diferenta intre 'Copy' (Copiere) si 'Cut' (Decupare)?",
                        options: [
                            "Nu exista nicio diferenta",
                            "Copy face o copie (originalul ramane), Cut muta fisierul (originalul dispare)",
                            "Cut face o copie, Copy sterge",
                            "Ambele sterg fisierul"
                        ],
                        correct: 1,
                        explanation: "COPY (Ctrl+C) = face o COPIE, originalul ramane in locul initial. CUT (Ctrl+X) = MUTA fisierul, dupa Paste dispare din locul original. Alege in functie de ce vrei!"
                    },
                    {
                        text: "Ce combinatie de taste lipeste (Paste) un fisier copiat sau decupat?",
                        options: [
                            "Ctrl + C",
                            "Ctrl + V",
                            "Ctrl + X",
                            "Ctrl + Z"
                        ],
                        correct: 1,
                        explanation: "Ctrl + V este comanda pentru Paste (Lipire). Dupa ce ai copiat (Ctrl+C) sau decupat (Ctrl+X) un fisier, te duci in folderul dorit si apesi Ctrl+V pentru a-l pune acolo."
                    },
                    {
                        text: "Cum copiezi un fisier folosind mouse-ul (fara tastatura)?",
                        options: [
                            "Click stanga de doua ori",
                            "Click dreapta pe fisier > Copy, apoi click dreapta in destinatie > Paste",
                            "Apesi pe fisier si astepti",
                            "Il stergi si il creezi din nou"
                        ],
                        correct: 1,
                        explanation: "Cu mouse-ul: Click DREAPTA pe fisier > Copy. Apoi te duci in folderul unde vrei copia, click DREAPTA pe spatiu gol > Paste. Gata, ai o copie!"
                    }
                ]
            },
            4: {
                title: "Nivel 4: Cautarea fisierelor",
                description: "Invata sa gasesti rapid fisierele pe calculator",
                xpReward: 125,
                questions: [
                    {
                        text: "Cum cauti un fisier in Windows daca nu stii unde e?",
                        options: [
                            "Deschizi toate folderele pe rand",
                            "Folosesti bara de cautare din File Explorer sau din meniul Start",
                            "Inchizi calculatorul",
                            "Nu se poate gasi"
                        ],
                        correct: 1,
                        explanation: "Windows are functie de cautare! In File Explorer, scrii in bara de cautare din dreapta-sus. Sau din Start, scrii direct numele fisierului. Windows il gaseste pentru tine!"
                    },
                    {
                        text: "Cum poti cauta toate fisierele de tip imagine (.jpg) dintr-un folder?",
                        options: [
                            "Scrii 'imagini' in cautare",
                            "Scrii '*.jpg' in bara de cautare",
                            "Deschizi Paint",
                            "Stergi toate celelalte fisiere"
                        ],
                        correct: 1,
                        explanation: "Semnul * (asterisc) inseamna 'orice'. Cautand '*.jpg' gasesti TOATE fisierele care se termina cu .jpg (adica toate imaginile JPG). La fel: *.docx = toate documentele Word."
                    },
                    {
                        text: "Ce se intampla daca cauti 'referat' in File Explorer?",
                        options: [
                            "Se sterge totul",
                            "Apar toate fisierele si folderele care contin cuvantul 'referat' in nume",
                            "Se deschide Word",
                            "Nu se intampla nimic"
                        ],
                        correct: 1,
                        explanation: "Cautarea gaseste toate fisierele si folderele care au 'referat' in nume: Referat_Istorie.docx, Referat_Romana.docx, folderul Referate etc. E foarte utila!"
                    }
                ]
            },
            5: {
                title: "Nivel 5: Bune practici",
                description: "Invata cele mai bune metode de organizare",
                xpReward: 150,
                questions: [
                    {
                        text: "De ce NU e bine sa salvezi toate fisierele pe Desktop?",
                        options: [
                            "Desktop-ul are o limita de 10 fisiere",
                            "Devine aglomerat, greu de gasit ce cauti si incetineste pornirea Windows",
                            "Fisierele se sterg automat",
                            "Desktop-ul nu poate contine fisiere"
                        ],
                        correct: 1,
                        explanation: "Un Desktop plin cu fisiere devine haotic - nu gasesti nimic! Plus ca multe fisiere pe Desktop pot incetini pornirea Windows. Salveaza in foldere organizate, pe Desktop pastreaza doar scurtaturi importante."
                    },
                    {
                        text: "Ce ar trebui sa faci periodic cu fisierele din folderul Downloads?",
                        options: [
                            "Sa le ignori",
                            "Sa le sortezi: muti fisierele utile in foldere potrivite, stergi ce nu mai ai nevoie",
                            "Sa le copiezi de 10 ori",
                            "Sa le redenumesti pe toate"
                        ],
                        correct: 1,
                        explanation: "Downloads se umple repede! Periodic, sorteaza: muta pozele in Pictures, documentele in Documents, sterge ce nu mai ai nevoie. Asa pastrezi calculatorul organizat!"
                    },
                    {
                        text: "Care este o metoda buna de a face backup (copie de siguranta) fisierelor importante?",
                        options: [
                            "Stergi fisierele",
                            "Le copiezi pe un stick USB, hard disk extern sau in cloud (Google Drive, OneDrive)",
                            "Le redenumesti",
                            "Le muti in Cosul de gunoi"
                        ],
                        correct: 1,
                        explanation: "Backup-ul inseamna a avea o COPIE in alt loc, in caz ca ceva se strica. Poti copia pe stick USB, hard disk extern sau in 'cloud' (OneDrive, Google Drive). Asa fisierele tale importante sunt in siguranta!"
                    }
                ]
            }
        };

        let currentLevel = 1;
        let currentQuestion = 0;
        let score = 0;
        let totalXP = 0;
        let levelScores = {};
        let unlockedLevels = [1];

        function loadProgress() {
            const saved = localStorage.getItem('sisteme_quiz5_progress');
            if (saved) {
                const data = JSON.parse(saved);
                totalXP = data.totalXP || 0;
                unlockedLevels = data.unlockedLevels || [1];
                levelScores = data.levelScores || {};
                updateXPDisplay();
                updateLevelMap();
            }
        }

        function saveProgress() {
            localStorage.setItem('sisteme_quiz5_progress', JSON.stringify({
                totalXP,
                unlockedLevels,
                levelScores
            }));
        }

        function updateXPDisplay() {
            document.getElementById('totalXP').textContent = totalXP;
        }

        function updateLevelMap() {
            document.querySelectorAll('.level-node').forEach((node, index) => {
                const level = index + 1;
                node.classList.remove('locked', 'active', 'completed');

                if (levelScores[level] !== undefined) {
                    node.classList.add('completed');
                } else if (unlockedLevels.includes(level)) {
                    if (level === Math.max(...unlockedLevels.filter(l => levelScores[l] === undefined))) {
                        node.classList.add('active');
                    }
                } else {
                    node.classList.add('locked');
                }
            });

            document.querySelectorAll('.level-connector').forEach((conn, index) => {
                if (levelScores[index + 1] !== undefined) {
                    conn.classList.add('completed');
                } else {
                    conn.classList.remove('completed');
                }
            });
        }

        function selectLevel(level) {
            if (!unlockedLevels.includes(level)) return;
            currentLevel = level;
            currentQuestion = 0;
            score = 0;
            showLevelIntro();
        }

        function showLevelIntro() {
            const levelData = levels[currentLevel];
            document.getElementById('quizArea').innerHTML = `
                <div class="level-intro">
                    <h2>${levelData.title}</h2>
                    <p>${levelData.description}</p>
                    <div class="xp-reward">+${levelData.xpReward} XP</div>
                    <button class="btn btn-primary" onclick="startLevel()">
                        Incepe Nivelul
                    </button>
                </div>
            `;
        }

        function startLevel() {
            showQuestion();
        }

        function showQuestion() {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];

            let progressDots = '';
            for (let i = 0; i < levelData.questions.length; i++) {
                let dotClass = 'progress-dot';
                if (i === currentQuestion) dotClass += ' current';
                progressDots += `<div class="${dotClass}"></div>`;
            }

            let visualHTML = '';
            if (q.hasVisual && q.visualType === 'tree') {
                visualHTML = `
                    <div class="folder-tree">
                        <div class="tree-root"><span class="tree-icon">üìÅ</span> Scoala</div>
                        <div class="tree-item"><span class="tree-icon">üìÅ</span> Matematica</div>
                        <div class="tree-item"><span class="tree-icon">üìÅ</span> Romana</div>
                        <div class="tree-item"><span class="tree-icon">üìÅ</span> Istorie</div>
                        <div class="tree-item"><span class="tree-icon">üìÅ</span> Informatica</div>
                    </div>
                `;
            }

            let optionsHTML = '';
            q.options.forEach((opt, i) => {
                optionsHTML += `<div class="option" onclick="selectAnswer(${i})">${opt}</div>`;
            });

            document.getElementById('quizArea').innerHTML = `
                <div class="question-container active">
                    <div class="question-progress">${progressDots}</div>
                    <p class="question-text">${q.text}</p>
                    ${visualHTML}
                    <div class="options-grid">${optionsHTML}</div>
                    <div class="feedback-box" id="feedback"></div>
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                            Urmatoarea Intrebare
                        </button>
                    </div>
                </div>
            `;
        }

        function selectAnswer(index) {
            const levelData = levels[currentLevel];
            const q = levelData.questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const nextBtn = document.getElementById('nextBtn');

            options.forEach(opt => opt.style.pointerEvents = 'none');

            options[index].classList.add(index === q.correct ? 'correct' : 'wrong');
            if (index !== q.correct) {
                options[q.correct].classList.add('correct');
            }

            const dots = document.querySelectorAll('.progress-dot');
            dots[currentQuestion].classList.remove('current');
            dots[currentQuestion].classList.add(index === q.correct ? 'correct' : 'wrong');

            if (index === q.correct) {
                score++;
                feedback.className = 'feedback-box show correct';
                feedback.innerHTML = `
                    <div class="feedback-icon">üéâ</div>
                    <div class="feedback-text">Corect! Excelent!</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            } else {
                feedback.className = 'feedback-box show wrong';
                feedback.innerHTML = `
                    <div class="feedback-icon">üòÖ</div>
                    <div class="feedback-text">Nu chiar... Iata explicatia:</div>
                    <div class="explanation">${q.explanation}</div>
                `;
            }

            nextBtn.style.display = 'inline-flex';
            nextBtn.textContent = currentQuestion < levelData.questions.length - 1 ?
                'Urmatoarea Intrebare' : 'Vezi Rezultatul';
        }

        function nextQuestion() {
            const levelData = levels[currentLevel];
            currentQuestion++;

            if (currentQuestion >= levelData.questions.length) {
                showLevelComplete();
            } else {
                showQuestion();
            }
        }

        function showLevelComplete() {
            const levelData = levels[currentLevel];
            const percentage = Math.round((score / levelData.questions.length) * 100);
            const passed = percentage >= 66;

            let stars = '';
            if (percentage >= 100) stars = '‚≠ê‚≠ê‚≠ê';
            else if (percentage >= 80) stars = '‚≠ê‚≠ê';
            else if (percentage >= 66) stars = '‚≠ê';
            else stars = 'üí™';

            let earnedXP = 0;
            if (passed) {
                earnedXP = levelData.xpReward;
                if (percentage === 100) earnedXP = Math.round(earnedXP * 1.5);

                if (!levelScores[currentLevel] || levelScores[currentLevel] < percentage) {
                    if (!levelScores[currentLevel]) {
                        totalXP += earnedXP;
                    }
                    levelScores[currentLevel] = percentage;
                }

                if (currentLevel < 5 && !unlockedLevels.includes(currentLevel + 1)) {
                    unlockedLevels.push(currentLevel + 1);
                }

                saveProgress();
                updateXPDisplay();
                updateLevelMap();
            }

            // Check if all 5 levels are completed for final celebration
            const allCompleted = passed && currentLevel === 5;

            document.getElementById('quizArea').innerHTML = `
                <div class="level-complete show">
                    <div class="level-complete-icon">${passed ? 'üèÜ' : 'üìö'}</div>
                    <h2>${passed ? (allCompleted ? 'FELICITARI! Ai terminat toate quiz-urile!' : 'Nivel Completat!') : 'Mai incearca!'}</h2>
                    <div class="stars">${stars}</div>
                    <div class="score-display">${score}/${levelData.questions.length} raspunsuri corecte (${percentage}%)</div>
                    ${passed ? `<div class="xp-earned">+${earnedXP} XP</div>` : ''}
                    ${allCompleted ? `
                        <div style="margin: 2rem 0; padding: 1.5rem; background: rgba(139, 92, 246, 0.2); border-radius: 12px; border: 2px solid var(--accent-purple);">
                            <p style="font-size: 1.1rem; color: var(--text-primary); margin-bottom: 1rem;">
                                Ai completat cu succes toate cele 5 quiz-uri despre Sisteme de Calcul!
                            </p>
                            <p style="color: var(--text-secondary);">
                                Acum stii totul despre: componente hardware, software si sisteme de operare,
                                lucrul cu ferestre, fisiere si foldere, si organizarea datelor!
                            </p>
                        </div>
                    ` : ''}
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="selectLevel(${currentLevel})">
                            Reincearca
                        </button>
                        ${passed && currentLevel < 5 ? `
                            <button class="btn btn-primary" onclick="selectLevel(${currentLevel + 1})">
                                Nivelul Urmator
                            </button>
                        ` : ''}
                        ${allCompleted ? `
                            <button class="btn btn-success" onclick="window.location.href='../index.html'">
                                Inapoi la Modulul 1
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        loadProgress();
        showLevelIntro();
    </script>
</body>
</html>
